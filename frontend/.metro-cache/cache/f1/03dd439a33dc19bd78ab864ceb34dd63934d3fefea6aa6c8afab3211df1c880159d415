{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":50,"index":129}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":201},"end":{"line":4,"column":40,"index":241}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SubscriptionContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.SubscriptionProvider = SubscriptionProvider;\n  exports.useSubscription = useSubscription;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  var _AuthContext = require(_dependencyMap[2], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const SubscriptionContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function SubscriptionProvider({\n    children\n  }) {\n    _s();\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    const [isPremium, setIsPremium] = (0, _react.useState)(false);\n    const [isTrial, setIsTrial] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const [expiresAt, setExpiresAt] = (0, _react.useState)(null);\n    const [daysRemaining, setDaysRemaining] = (0, _react.useState)(null);\n    const [isExpired, setIsExpired] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      if (user) {\n        initializeSubscription();\n      }\n    }, [user]);\n    const initializeSubscription = async () => {\n      try {\n        // V√©rifier le statut de l'abonnement\n        await checkSubscription();\n      } catch (error) {\n        console.error('Erreur initialisation abonnement:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const checkSubscription = async () => {\n      try {\n        setIsLoading(true);\n\n        // V√©rifier depuis le backend\n        const response = await _servicesApi.subscriptionAPI.getStatus();\n        const status = response.data;\n        setIsPremium(status.isActive);\n        setIsTrial(status.isTrial);\n        setExpiresAt(status.expiresAt ? new Date(status.expiresAt) : null);\n        setDaysRemaining(status.daysRemaining ?? null);\n        setIsExpired(status.isExpired || false);\n        console.log('‚úÖ Statut abonnement:', status);\n        console.log(`üìÖ Jours restants: ${status.daysRemaining}`);\n      } catch (error) {\n        console.error('Erreur v√©rification abonnement:', error);\n        // En cas d'erreur, on donne acc√®s (meilleure UX en mode d√©mo)\n        setIsPremium(true);\n        setIsExpired(false);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const startTrial = async () => {\n      try {\n        const response = await _servicesApi.subscriptionAPI.startTrial();\n        if (response.data.success) {\n          setIsPremium(true);\n          setIsTrial(true);\n          setExpiresAt(new Date(response.data.expiresAt));\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('Erreur d√©marrage essai:', error);\n        return false;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SubscriptionContext.Provider, {\n      value: {\n        isPremium,\n        isTrial,\n        isLoading,\n        expiresAt,\n        daysRemaining,\n        isExpired,\n        checkSubscription,\n        startTrial\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this);\n  }\n  _s(SubscriptionProvider, \"Iq/f+EdGif0IVniD5xVo3OSh4rg=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = SubscriptionProvider;\n  function useSubscription() {\n    _s2();\n    const context = (0, _react.useContext)(SubscriptionContext);\n    if (context === undefined) {\n      throw new Error('useSubscription must be used within a SubscriptionProvider');\n    }\n    return context;\n  }\n  _s2(useSubscription, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"SubscriptionProvider\");\n});","lineCount":116,"map":[[10,2,19,0,"exports"],[10,9,19,0],[10,10,19,0,"SubscriptionProvider"],[10,30,19,0],[10,33,19,0,"SubscriptionProvider"],[10,53,19,0],[11,2,108,0,"exports"],[11,9,108,0],[11,10,108,0,"useSubscription"],[11,25,108,0],[11,28,108,0,"useSubscription"],[11,43,108,0],[12,2,1,0],[12,6,1,0,"_react"],[12,12,1,0],[12,15,1,0,"require"],[12,22,1,0],[12,23,1,0,"_dependencyMap"],[12,37,1,0],[13,2,2,0],[13,6,2,0,"_servicesApi"],[13,18,2,0],[13,21,2,0,"require"],[13,28,2,0],[13,29,2,0,"_dependencyMap"],[13,43,2,0],[14,2,4,0],[14,6,4,0,"_AuthContext"],[14,18,4,0],[14,21,4,0,"require"],[14,28,4,0],[14,29,4,0,"_dependencyMap"],[14,43,4,0],[15,2,4,40],[15,6,4,40,"_reactJsxDevRuntime"],[15,25,4,40],[15,28,4,40,"require"],[15,35,4,40],[15,36,4,40,"_dependencyMap"],[15,50,4,40],[16,2,17,0],[16,8,17,6,"SubscriptionContext"],[16,27,17,25],[16,43,17,28],[16,47,17,28,"createContext"],[16,53,17,41],[16,54,17,41,"createContext"],[16,67,17,41],[16,69,17,79,"undefined"],[16,78,17,88],[16,79,17,89],[17,2,19,7],[17,11,19,16,"SubscriptionProvider"],[17,31,19,36,"SubscriptionProvider"],[17,32,19,37],[18,4,19,39,"children"],[19,2,19,79],[19,3,19,80],[19,5,19,82],[20,4,19,82,"_s"],[20,6,19,82],[21,4,20,2],[21,10,20,8],[22,6,20,10,"user"],[23,4,20,15],[23,5,20,16],[23,8,20,19],[23,12,20,19,"useAuth"],[23,24,20,26],[23,25,20,26,"useAuth"],[23,32,20,26],[23,34,20,27],[23,35,20,28],[24,4,21,2],[24,10,21,8],[24,11,21,9,"isPremium"],[24,20,21,18],[24,22,21,20,"setIsPremium"],[24,34,21,32],[24,35,21,33],[24,38,21,36],[24,42,21,36,"useState"],[24,48,21,44],[24,49,21,44,"useState"],[24,57,21,44],[24,59,21,45],[24,64,21,50],[24,65,21,51],[25,4,22,2],[25,10,22,8],[25,11,22,9,"isTrial"],[25,18,22,16],[25,20,22,18,"setIsTrial"],[25,30,22,28],[25,31,22,29],[25,34,22,32],[25,38,22,32,"useState"],[25,44,22,40],[25,45,22,40,"useState"],[25,53,22,40],[25,55,22,41],[25,60,22,46],[25,61,22,47],[26,4,23,2],[26,10,23,8],[26,11,23,9,"isLoading"],[26,20,23,18],[26,22,23,20,"setIsLoading"],[26,34,23,32],[26,35,23,33],[26,38,23,36],[26,42,23,36,"useState"],[26,48,23,44],[26,49,23,44,"useState"],[26,57,23,44],[26,59,23,45],[26,63,23,49],[26,64,23,50],[27,4,24,2],[27,10,24,8],[27,11,24,9,"expiresAt"],[27,20,24,18],[27,22,24,20,"setExpiresAt"],[27,34,24,32],[27,35,24,33],[27,38,24,36],[27,42,24,36,"useState"],[27,48,24,44],[27,49,24,44,"useState"],[27,57,24,44],[27,59,24,58],[27,63,24,62],[27,64,24,63],[28,4,25,2],[28,10,25,8],[28,11,25,9,"daysRemaining"],[28,24,25,22],[28,26,25,24,"setDaysRemaining"],[28,42,25,40],[28,43,25,41],[28,46,25,44],[28,50,25,44,"useState"],[28,56,25,52],[28,57,25,52,"useState"],[28,65,25,52],[28,67,25,68],[28,71,25,72],[28,72,25,73],[29,4,26,2],[29,10,26,8],[29,11,26,9,"isExpired"],[29,20,26,18],[29,22,26,20,"setIsExpired"],[29,34,26,32],[29,35,26,33],[29,38,26,36],[29,42,26,36,"useState"],[29,48,26,44],[29,49,26,44,"useState"],[29,57,26,44],[29,59,26,45],[29,64,26,50],[29,65,26,51],[30,4,28,2],[30,8,28,2,"useEffect"],[30,14,28,11],[30,15,28,11,"useEffect"],[30,24,28,11],[30,26,28,12],[30,32,28,18],[31,6,29,4],[31,10,29,8,"user"],[31,14,29,12],[31,16,29,14],[32,8,30,6,"initializeSubscription"],[32,30,30,28],[32,31,30,29],[32,32,30,30],[33,6,31,4],[34,4,32,2],[34,5,32,3],[34,7,32,5],[34,8,32,6,"user"],[34,12,32,10],[34,13,32,11],[34,14,32,12],[35,4,34,2],[35,10,34,8,"initializeSubscription"],[35,32,34,30],[35,35,34,33],[35,41,34,33,"initializeSubscription"],[35,42,34,33],[35,47,34,45],[36,6,35,4],[36,10,35,8],[37,8,36,6],[38,8,37,6],[38,14,37,12,"checkSubscription"],[38,31,37,29],[38,32,37,30],[38,33,37,31],[39,6,38,4],[39,7,38,5],[39,8,38,6],[39,15,38,13,"error"],[39,20,38,18],[39,22,38,20],[40,8,39,6,"console"],[40,15,39,13],[40,16,39,14,"error"],[40,21,39,19],[40,22,39,20],[40,57,39,55],[40,59,39,57,"error"],[40,64,39,62],[40,65,39,63],[41,6,40,4],[41,7,40,5],[41,16,40,14],[42,8,41,6,"setIsLoading"],[42,20,41,18],[42,21,41,19],[42,26,41,24],[42,27,41,25],[43,6,42,4],[44,4,43,2],[44,5,43,3],[45,4,45,2],[45,10,45,8,"checkSubscription"],[45,27,45,25],[45,30,45,28],[45,36,45,28,"checkSubscription"],[45,37,45,28],[45,42,45,40],[46,6,46,4],[46,10,46,8],[47,8,47,6,"setIsLoading"],[47,20,47,18],[47,21,47,19],[47,25,47,23],[47,26,47,24],[49,8,49,6],[50,8,50,6],[50,14,50,12,"response"],[50,22,50,20],[50,25,50,23],[50,31,50,29,"subscriptionAPI"],[50,43,50,44],[50,44,50,44,"subscriptionAPI"],[50,59,50,44],[50,60,50,45,"getStatus"],[50,69,50,54],[50,70,50,55],[50,71,50,56],[51,8,51,6],[51,14,51,12,"status"],[51,20,51,18],[51,23,51,21,"response"],[51,31,51,29],[51,32,51,30,"data"],[51,36,51,34],[52,8,53,6,"setIsPremium"],[52,20,53,18],[52,21,53,19,"status"],[52,27,53,25],[52,28,53,26,"isActive"],[52,36,53,34],[52,37,53,35],[53,8,54,6,"setIsTrial"],[53,18,54,16],[53,19,54,17,"status"],[53,25,54,23],[53,26,54,24,"isTrial"],[53,33,54,31],[53,34,54,32],[54,8,55,6,"setExpiresAt"],[54,20,55,18],[54,21,55,19,"status"],[54,27,55,25],[54,28,55,26,"expiresAt"],[54,37,55,35],[54,40,55,38],[54,44,55,42,"Date"],[54,48,55,46],[54,49,55,47,"status"],[54,55,55,53],[54,56,55,54,"expiresAt"],[54,65,55,63],[54,66,55,64],[54,69,55,67],[54,73,55,71],[54,74,55,72],[55,8,56,6,"setDaysRemaining"],[55,24,56,22],[55,25,56,23,"status"],[55,31,56,29],[55,32,56,30,"daysRemaining"],[55,45,56,43],[55,49,56,47],[55,53,56,51],[55,54,56,52],[56,8,57,6,"setIsExpired"],[56,20,57,18],[56,21,57,19,"status"],[56,27,57,25],[56,28,57,26,"isExpired"],[56,37,57,35],[56,41,57,39],[56,46,57,44],[56,47,57,45],[57,8,59,6,"console"],[57,15,59,13],[57,16,59,14,"log"],[57,19,59,17],[57,20,59,18],[57,42,59,40],[57,44,59,42,"status"],[57,50,59,48],[57,51,59,49],[58,8,60,6,"console"],[58,15,60,13],[58,16,60,14,"log"],[58,19,60,17],[58,20,60,18],[58,42,60,40,"status"],[58,48,60,46],[58,49,60,47,"daysRemaining"],[58,62,60,60],[58,64,60,62],[58,65,60,63],[59,6,62,4],[59,7,62,5],[59,8,62,6],[59,15,62,13,"error"],[59,20,62,18],[59,22,62,20],[60,8,63,6,"console"],[60,15,63,13],[60,16,63,14,"error"],[60,21,63,19],[60,22,63,20],[60,55,63,53],[60,57,63,55,"error"],[60,62,63,60],[60,63,63,61],[61,8,64,6],[62,8,65,6,"setIsPremium"],[62,20,65,18],[62,21,65,19],[62,25,65,23],[62,26,65,24],[63,8,66,6,"setIsExpired"],[63,20,66,18],[63,21,66,19],[63,26,66,24],[63,27,66,25],[64,6,67,4],[64,7,67,5],[64,16,67,14],[65,8,68,6,"setIsLoading"],[65,20,68,18],[65,21,68,19],[65,26,68,24],[65,27,68,25],[66,6,69,4],[67,4,70,2],[67,5,70,3],[68,4,72,2],[68,10,72,8,"startTrial"],[68,20,72,18],[68,23,72,21],[68,29,72,21,"startTrial"],[68,30,72,21],[68,35,72,51],[69,6,73,4],[69,10,73,8],[70,8,74,6],[70,14,74,12,"response"],[70,22,74,20],[70,25,74,23],[70,31,74,29,"subscriptionAPI"],[70,43,74,44],[70,44,74,44,"subscriptionAPI"],[70,59,74,44],[70,60,74,45,"startTrial"],[70,70,74,55],[70,71,74,56],[70,72,74,57],[71,8,76,6],[71,12,76,10,"response"],[71,20,76,18],[71,21,76,19,"data"],[71,25,76,23],[71,26,76,24,"success"],[71,33,76,31],[71,35,76,33],[72,10,77,8,"setIsPremium"],[72,22,77,20],[72,23,77,21],[72,27,77,25],[72,28,77,26],[73,10,78,8,"setIsTrial"],[73,20,78,18],[73,21,78,19],[73,25,78,23],[73,26,78,24],[74,10,79,8,"setExpiresAt"],[74,22,79,20],[74,23,79,21],[74,27,79,25,"Date"],[74,31,79,29],[74,32,79,30,"response"],[74,40,79,38],[74,41,79,39,"data"],[74,45,79,43],[74,46,79,44,"expiresAt"],[74,55,79,53],[74,56,79,54],[74,57,79,55],[75,10,80,8],[75,17,80,15],[75,21,80,19],[76,8,81,6],[77,8,83,6],[77,15,83,13],[77,20,83,18],[78,6,84,4],[78,7,84,5],[78,8,84,6],[78,15,84,13,"error"],[78,20,84,18],[78,22,84,20],[79,8,85,6,"console"],[79,15,85,13],[79,16,85,14,"error"],[79,21,85,19],[79,22,85,20],[79,47,85,45],[79,49,85,47,"error"],[79,54,85,52],[79,55,85,53],[80,8,86,6],[80,15,86,13],[80,20,86,18],[81,6,87,4],[82,4,88,2],[82,5,88,3],[83,4,90,2],[83,24,91,4],[83,28,91,4,"_reactJsxDevRuntime"],[83,47,91,4],[83,48,91,4,"jsxDEV"],[83,54,91,4],[83,56,91,5,"SubscriptionContext"],[83,75,91,24],[83,76,91,25,"Provider"],[83,84,91,33],[84,6,92,6,"value"],[84,11,92,11],[84,13,92,13],[85,8,93,8,"isPremium"],[85,17,93,17],[86,8,94,8,"isTrial"],[86,15,94,15],[87,8,95,8,"isLoading"],[87,17,95,17],[88,8,96,8,"expiresAt"],[88,17,96,17],[89,8,97,8,"daysRemaining"],[89,21,97,21],[90,8,98,8,"isExpired"],[90,17,98,17],[91,8,99,8,"checkSubscription"],[91,25,99,25],[92,8,100,8,"startTrial"],[93,6,101,6],[93,7,101,8],[94,6,101,8,"children"],[94,14,101,8],[94,16,103,7,"children"],[95,4,103,15],[96,6,103,15,"fileName"],[96,14,103,15],[96,16,103,15,"_jsxFileName"],[96,28,103,15],[97,6,103,15,"lineNumber"],[97,16,103,15],[98,6,103,15,"columnNumber"],[98,18,103,15],[99,4,103,15],[99,11,104,34],[99,12,104,35],[100,2,106,0],[101,2,106,1,"_s"],[101,4,106,1],[101,5,19,16,"SubscriptionProvider"],[101,25,19,36],[102,4,19,36],[102,12,20,19,"useAuth"],[102,24,20,26],[102,25,20,26,"useAuth"],[102,32,20,26],[103,2,20,26],[104,2,20,26,"_c"],[104,4,20,26],[104,7,19,16,"SubscriptionProvider"],[104,27,19,36],[105,2,108,7],[105,11,108,16,"useSubscription"],[105,26,108,31,"useSubscription"],[105,27,108,31],[105,29,108,34],[106,4,108,34,"_s2"],[106,7,108,34],[107,4,109,2],[107,10,109,8,"context"],[107,17,109,15],[107,20,109,18],[107,24,109,18,"useContext"],[107,30,109,28],[107,31,109,28,"useContext"],[107,41,109,28],[107,43,109,29,"SubscriptionContext"],[107,62,109,48],[107,63,109,49],[108,4,110,2],[108,8,110,6,"context"],[108,15,110,13],[108,20,110,18,"undefined"],[108,29,110,27],[108,31,110,29],[109,6,111,4],[109,12,111,10],[109,16,111,14,"Error"],[109,21,111,19],[109,22,111,20],[109,82,111,80],[109,83,111,81],[110,4,112,2],[111,4,113,2],[111,11,113,9,"context"],[111,18,113,16],[112,2,114,0],[113,2,114,1,"_s2"],[113,5,114,1],[113,6,108,16,"useSubscription"],[113,21,108,31],[114,2,108,31],[114,6,108,31,"_c"],[114,8,108,31],[115,2,108,31,"$RefreshReg$"],[115,14,108,31],[115,15,108,31,"_c"],[115,17,108,31],[116,0,108,31],[116,3]],"functionMap":{"names":["<global>","SubscriptionProvider","useEffect$argument_0","initializeSubscription","checkSubscription","startTrial","useSubscription"],"mappings":"AAA;OCkB;YCS;GDI;iCEE;GFS;4BGE;GHyB;qBIE;GJgB;CDkB;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}