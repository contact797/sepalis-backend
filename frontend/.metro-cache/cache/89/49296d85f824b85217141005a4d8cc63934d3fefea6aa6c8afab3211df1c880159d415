{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":50,"index":129}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":201},"end":{"line":4,"column":40,"index":241}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SubscriptionContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.SubscriptionProvider = SubscriptionProvider;\n  exports.useSubscription = useSubscription;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  var _AuthContext = require(_dependencyMap[2], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const SubscriptionContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function SubscriptionProvider({\n    children\n  }) {\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    const [isPremium, setIsPremium] = (0, _react.useState)(false);\n    const [isTrial, setIsTrial] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const [expiresAt, setExpiresAt] = (0, _react.useState)(null);\n    const [daysRemaining, setDaysRemaining] = (0, _react.useState)(null);\n    const [isExpired, setIsExpired] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      if (user) {\n        initializeSubscription();\n      }\n    }, [user]);\n    const initializeSubscription = async () => {\n      try {\n        // V√©rifier le statut de l'abonnement\n        await checkSubscription();\n      } catch (error) {\n        console.error('Erreur initialisation abonnement:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const checkSubscription = async () => {\n      try {\n        setIsLoading(true);\n\n        // V√©rifier depuis le backend\n        const response = await _servicesApi.subscriptionAPI.getStatus();\n        const status = response.data;\n        setIsPremium(status.isActive);\n        setIsTrial(status.isTrial);\n        setExpiresAt(status.expiresAt ? new Date(status.expiresAt) : null);\n        setDaysRemaining(status.daysRemaining ?? null);\n        setIsExpired(status.isExpired || false);\n        console.log('‚úÖ Statut abonnement:', status);\n        console.log(`üìÖ Jours restants: ${status.daysRemaining}`);\n      } catch (error) {\n        console.error('Erreur v√©rification abonnement:', error);\n        // En cas d'erreur, on donne acc√®s (meilleure UX en mode d√©mo)\n        setIsPremium(true);\n        setIsExpired(false);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const startTrial = async () => {\n      try {\n        const response = await _servicesApi.subscriptionAPI.startTrial();\n        if (response.data.success) {\n          setIsPremium(true);\n          setIsTrial(true);\n          setExpiresAt(new Date(response.data.expiresAt));\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('Erreur d√©marrage essai:', error);\n        return false;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SubscriptionContext.Provider, {\n      value: {\n        isPremium,\n        isTrial,\n        isLoading,\n        expiresAt,\n        daysRemaining,\n        isExpired,\n        checkSubscription,\n        startTrial\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }, this);\n  }\n  function useSubscription() {\n    const context = (0, _react.useContext)(SubscriptionContext);\n    if (context === undefined) {\n      throw new Error('useSubscription must be used within a SubscriptionProvider');\n    }\n    return context;\n  }\n});","lineCount":105,"map":[[8,2,19,0,"exports"],[8,9,19,0],[8,10,19,0,"SubscriptionProvider"],[8,30,19,0],[8,33,19,0,"SubscriptionProvider"],[8,53,19,0],[9,2,108,0,"exports"],[9,9,108,0],[9,10,108,0,"useSubscription"],[9,25,108,0],[9,28,108,0,"useSubscription"],[9,43,108,0],[10,2,1,0],[10,6,1,0,"_react"],[10,12,1,0],[10,15,1,0,"require"],[10,22,1,0],[10,23,1,0,"_dependencyMap"],[10,37,1,0],[11,2,2,0],[11,6,2,0,"_servicesApi"],[11,18,2,0],[11,21,2,0,"require"],[11,28,2,0],[11,29,2,0,"_dependencyMap"],[11,43,2,0],[12,2,4,0],[12,6,4,0,"_AuthContext"],[12,18,4,0],[12,21,4,0,"require"],[12,28,4,0],[12,29,4,0,"_dependencyMap"],[12,43,4,0],[13,2,4,40],[13,6,4,40,"_reactJsxDevRuntime"],[13,25,4,40],[13,28,4,40,"require"],[13,35,4,40],[13,36,4,40,"_dependencyMap"],[13,50,4,40],[14,2,17,0],[14,8,17,6,"SubscriptionContext"],[14,27,17,25],[14,43,17,28],[14,47,17,28,"createContext"],[14,53,17,41],[14,54,17,41,"createContext"],[14,67,17,41],[14,69,17,79,"undefined"],[14,78,17,88],[14,79,17,89],[15,2,19,7],[15,11,19,16,"SubscriptionProvider"],[15,31,19,36,"SubscriptionProvider"],[15,32,19,37],[16,4,19,39,"children"],[17,2,19,79],[17,3,19,80],[17,5,19,82],[18,4,20,2],[18,10,20,8],[19,6,20,10,"user"],[20,4,20,15],[20,5,20,16],[20,8,20,19],[20,12,20,19,"useAuth"],[20,24,20,26],[20,25,20,26,"useAuth"],[20,32,20,26],[20,34,20,27],[20,35,20,28],[21,4,21,2],[21,10,21,8],[21,11,21,9,"isPremium"],[21,20,21,18],[21,22,21,20,"setIsPremium"],[21,34,21,32],[21,35,21,33],[21,38,21,36],[21,42,21,36,"useState"],[21,48,21,44],[21,49,21,44,"useState"],[21,57,21,44],[21,59,21,45],[21,64,21,50],[21,65,21,51],[22,4,22,2],[22,10,22,8],[22,11,22,9,"isTrial"],[22,18,22,16],[22,20,22,18,"setIsTrial"],[22,30,22,28],[22,31,22,29],[22,34,22,32],[22,38,22,32,"useState"],[22,44,22,40],[22,45,22,40,"useState"],[22,53,22,40],[22,55,22,41],[22,60,22,46],[22,61,22,47],[23,4,23,2],[23,10,23,8],[23,11,23,9,"isLoading"],[23,20,23,18],[23,22,23,20,"setIsLoading"],[23,34,23,32],[23,35,23,33],[23,38,23,36],[23,42,23,36,"useState"],[23,48,23,44],[23,49,23,44,"useState"],[23,57,23,44],[23,59,23,45],[23,63,23,49],[23,64,23,50],[24,4,24,2],[24,10,24,8],[24,11,24,9,"expiresAt"],[24,20,24,18],[24,22,24,20,"setExpiresAt"],[24,34,24,32],[24,35,24,33],[24,38,24,36],[24,42,24,36,"useState"],[24,48,24,44],[24,49,24,44,"useState"],[24,57,24,44],[24,59,24,58],[24,63,24,62],[24,64,24,63],[25,4,25,2],[25,10,25,8],[25,11,25,9,"daysRemaining"],[25,24,25,22],[25,26,25,24,"setDaysRemaining"],[25,42,25,40],[25,43,25,41],[25,46,25,44],[25,50,25,44,"useState"],[25,56,25,52],[25,57,25,52,"useState"],[25,65,25,52],[25,67,25,68],[25,71,25,72],[25,72,25,73],[26,4,26,2],[26,10,26,8],[26,11,26,9,"isExpired"],[26,20,26,18],[26,22,26,20,"setIsExpired"],[26,34,26,32],[26,35,26,33],[26,38,26,36],[26,42,26,36,"useState"],[26,48,26,44],[26,49,26,44,"useState"],[26,57,26,44],[26,59,26,45],[26,64,26,50],[26,65,26,51],[27,4,28,2],[27,8,28,2,"useEffect"],[27,14,28,11],[27,15,28,11,"useEffect"],[27,24,28,11],[27,26,28,12],[27,32,28,18],[28,6,29,4],[28,10,29,8,"user"],[28,14,29,12],[28,16,29,14],[29,8,30,6,"initializeSubscription"],[29,30,30,28],[29,31,30,29],[29,32,30,30],[30,6,31,4],[31,4,32,2],[31,5,32,3],[31,7,32,5],[31,8,32,6,"user"],[31,12,32,10],[31,13,32,11],[31,14,32,12],[32,4,34,2],[32,10,34,8,"initializeSubscription"],[32,32,34,30],[32,35,34,33],[32,41,34,33,"initializeSubscription"],[32,42,34,33],[32,47,34,45],[33,6,35,4],[33,10,35,8],[34,8,36,6],[35,8,37,6],[35,14,37,12,"checkSubscription"],[35,31,37,29],[35,32,37,30],[35,33,37,31],[36,6,38,4],[36,7,38,5],[36,8,38,6],[36,15,38,13,"error"],[36,20,38,18],[36,22,38,20],[37,8,39,6,"console"],[37,15,39,13],[37,16,39,14,"error"],[37,21,39,19],[37,22,39,20],[37,57,39,55],[37,59,39,57,"error"],[37,64,39,62],[37,65,39,63],[38,6,40,4],[38,7,40,5],[38,16,40,14],[39,8,41,6,"setIsLoading"],[39,20,41,18],[39,21,41,19],[39,26,41,24],[39,27,41,25],[40,6,42,4],[41,4,43,2],[41,5,43,3],[42,4,45,2],[42,10,45,8,"checkSubscription"],[42,27,45,25],[42,30,45,28],[42,36,45,28,"checkSubscription"],[42,37,45,28],[42,42,45,40],[43,6,46,4],[43,10,46,8],[44,8,47,6,"setIsLoading"],[44,20,47,18],[44,21,47,19],[44,25,47,23],[44,26,47,24],[46,8,49,6],[47,8,50,6],[47,14,50,12,"response"],[47,22,50,20],[47,25,50,23],[47,31,50,29,"subscriptionAPI"],[47,43,50,44],[47,44,50,44,"subscriptionAPI"],[47,59,50,44],[47,60,50,45,"getStatus"],[47,69,50,54],[47,70,50,55],[47,71,50,56],[48,8,51,6],[48,14,51,12,"status"],[48,20,51,18],[48,23,51,21,"response"],[48,31,51,29],[48,32,51,30,"data"],[48,36,51,34],[49,8,53,6,"setIsPremium"],[49,20,53,18],[49,21,53,19,"status"],[49,27,53,25],[49,28,53,26,"isActive"],[49,36,53,34],[49,37,53,35],[50,8,54,6,"setIsTrial"],[50,18,54,16],[50,19,54,17,"status"],[50,25,54,23],[50,26,54,24,"isTrial"],[50,33,54,31],[50,34,54,32],[51,8,55,6,"setExpiresAt"],[51,20,55,18],[51,21,55,19,"status"],[51,27,55,25],[51,28,55,26,"expiresAt"],[51,37,55,35],[51,40,55,38],[51,44,55,42,"Date"],[51,48,55,46],[51,49,55,47,"status"],[51,55,55,53],[51,56,55,54,"expiresAt"],[51,65,55,63],[51,66,55,64],[51,69,55,67],[51,73,55,71],[51,74,55,72],[52,8,56,6,"setDaysRemaining"],[52,24,56,22],[52,25,56,23,"status"],[52,31,56,29],[52,32,56,30,"daysRemaining"],[52,45,56,43],[52,49,56,47],[52,53,56,51],[52,54,56,52],[53,8,57,6,"setIsExpired"],[53,20,57,18],[53,21,57,19,"status"],[53,27,57,25],[53,28,57,26,"isExpired"],[53,37,57,35],[53,41,57,39],[53,46,57,44],[53,47,57,45],[54,8,59,6,"console"],[54,15,59,13],[54,16,59,14,"log"],[54,19,59,17],[54,20,59,18],[54,42,59,40],[54,44,59,42,"status"],[54,50,59,48],[54,51,59,49],[55,8,60,6,"console"],[55,15,60,13],[55,16,60,14,"log"],[55,19,60,17],[55,20,60,18],[55,42,60,40,"status"],[55,48,60,46],[55,49,60,47,"daysRemaining"],[55,62,60,60],[55,64,60,62],[55,65,60,63],[56,6,62,4],[56,7,62,5],[56,8,62,6],[56,15,62,13,"error"],[56,20,62,18],[56,22,62,20],[57,8,63,6,"console"],[57,15,63,13],[57,16,63,14,"error"],[57,21,63,19],[57,22,63,20],[57,55,63,53],[57,57,63,55,"error"],[57,62,63,60],[57,63,63,61],[58,8,64,6],[59,8,65,6,"setIsPremium"],[59,20,65,18],[59,21,65,19],[59,25,65,23],[59,26,65,24],[60,8,66,6,"setIsExpired"],[60,20,66,18],[60,21,66,19],[60,26,66,24],[60,27,66,25],[61,6,67,4],[61,7,67,5],[61,16,67,14],[62,8,68,6,"setIsLoading"],[62,20,68,18],[62,21,68,19],[62,26,68,24],[62,27,68,25],[63,6,69,4],[64,4,70,2],[64,5,70,3],[65,4,72,2],[65,10,72,8,"startTrial"],[65,20,72,18],[65,23,72,21],[65,29,72,21,"startTrial"],[65,30,72,21],[65,35,72,51],[66,6,73,4],[66,10,73,8],[67,8,74,6],[67,14,74,12,"response"],[67,22,74,20],[67,25,74,23],[67,31,74,29,"subscriptionAPI"],[67,43,74,44],[67,44,74,44,"subscriptionAPI"],[67,59,74,44],[67,60,74,45,"startTrial"],[67,70,74,55],[67,71,74,56],[67,72,74,57],[68,8,76,6],[68,12,76,10,"response"],[68,20,76,18],[68,21,76,19,"data"],[68,25,76,23],[68,26,76,24,"success"],[68,33,76,31],[68,35,76,33],[69,10,77,8,"setIsPremium"],[69,22,77,20],[69,23,77,21],[69,27,77,25],[69,28,77,26],[70,10,78,8,"setIsTrial"],[70,20,78,18],[70,21,78,19],[70,25,78,23],[70,26,78,24],[71,10,79,8,"setExpiresAt"],[71,22,79,20],[71,23,79,21],[71,27,79,25,"Date"],[71,31,79,29],[71,32,79,30,"response"],[71,40,79,38],[71,41,79,39,"data"],[71,45,79,43],[71,46,79,44,"expiresAt"],[71,55,79,53],[71,56,79,54],[71,57,79,55],[72,10,80,8],[72,17,80,15],[72,21,80,19],[73,8,81,6],[74,8,83,6],[74,15,83,13],[74,20,83,18],[75,6,84,4],[75,7,84,5],[75,8,84,6],[75,15,84,13,"error"],[75,20,84,18],[75,22,84,20],[76,8,85,6,"console"],[76,15,85,13],[76,16,85,14,"error"],[76,21,85,19],[76,22,85,20],[76,47,85,45],[76,49,85,47,"error"],[76,54,85,52],[76,55,85,53],[77,8,86,6],[77,15,86,13],[77,20,86,18],[78,6,87,4],[79,4,88,2],[79,5,88,3],[80,4,90,2],[80,24,91,4],[80,28,91,4,"_reactJsxDevRuntime"],[80,47,91,4],[80,48,91,4,"jsxDEV"],[80,54,91,4],[80,56,91,5,"SubscriptionContext"],[80,75,91,24],[80,76,91,25,"Provider"],[80,84,91,33],[81,6,92,6,"value"],[81,11,92,11],[81,13,92,13],[82,8,93,8,"isPremium"],[82,17,93,17],[83,8,94,8,"isTrial"],[83,15,94,15],[84,8,95,8,"isLoading"],[84,17,95,17],[85,8,96,8,"expiresAt"],[85,17,96,17],[86,8,97,8,"daysRemaining"],[86,21,97,21],[87,8,98,8,"isExpired"],[87,17,98,17],[88,8,99,8,"checkSubscription"],[88,25,99,25],[89,8,100,8,"startTrial"],[90,6,101,6],[90,7,101,8],[91,6,101,8,"children"],[91,14,101,8],[91,16,103,7,"children"],[92,4,103,15],[93,6,103,15,"fileName"],[93,14,103,15],[93,16,103,15,"_jsxFileName"],[93,28,103,15],[94,6,103,15,"lineNumber"],[94,16,103,15],[95,6,103,15,"columnNumber"],[95,18,103,15],[96,4,103,15],[96,11,104,34],[96,12,104,35],[97,2,106,0],[98,2,108,7],[98,11,108,16,"useSubscription"],[98,26,108,31,"useSubscription"],[98,27,108,31],[98,29,108,34],[99,4,109,2],[99,10,109,8,"context"],[99,17,109,15],[99,20,109,18],[99,24,109,18,"useContext"],[99,30,109,28],[99,31,109,28,"useContext"],[99,41,109,28],[99,43,109,29,"SubscriptionContext"],[99,62,109,48],[99,63,109,49],[100,4,110,2],[100,8,110,6,"context"],[100,15,110,13],[100,20,110,18,"undefined"],[100,29,110,27],[100,31,110,29],[101,6,111,4],[101,12,111,10],[101,16,111,14,"Error"],[101,21,111,19],[101,22,111,20],[101,82,111,80],[101,83,111,81],[102,4,112,2],[103,4,113,2],[103,11,113,9,"context"],[103,18,113,16],[104,2,114,0],[105,0,114,1],[105,3]],"functionMap":{"names":["<global>","SubscriptionProvider","useEffect$argument_0","initializeSubscription","checkSubscription","startTrial","useSubscription"],"mappings":"AAA;OCkB;YCS;GDI;iCEE;GFS;4BGE;GHyB;qBIE;GJgB;CDkB;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}