{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":42,"index":202}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({});\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [showOnboarding, setShowOnboarding] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      loadStoredData();\n    }, []);\n    async function loadStoredData() {\n      try {\n        const storedUser = await AsyncStorage.default.getItem('user');\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const onboardingCompleted = await AsyncStorage.default.getItem('onboardingCompleted');\n        if (storedUser && storedToken) {\n          setUser(JSON.parse(storedUser));\n\n          // Afficher l'onboarding si pas encore compl√©t√©\n          if (!onboardingCompleted) {\n            setShowOnboarding(true);\n          }\n        }\n      } catch (error) {\n        console.error('Erreur chargement donn√©es:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    const completeOnboarding = () => {\n      setShowOnboarding(false);\n    };\n    async function signIn(email, password) {\n      try {\n        const response = await _servicesApi.authAPI.login(email, password);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur de connexion');\n      }\n    }\n    async function signUp(email, password, name) {\n      try {\n        const response = await _servicesApi.authAPI.register(email, password, name);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur d\\'inscription');\n      }\n    }\n    async function signOut() {\n      try {\n        console.log('üîì D√©connexion en cours...');\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('authToken'); // Support des deux noms\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('onboardingCompleted');\n        setUser(null);\n        console.log('‚úÖ D√©connexion r√©ussie');\n      } catch (error) {\n        console.error('‚ùå Erreur d√©connexion:', error);\n      }\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        showOnboarding,\n        completeOnboarding,\n        signIn,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"ou5WqXBdlbtSLOpshRQ22BRd1OE=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth doit √™tre utilis√© dans AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":131,"map":[[15,2,23,0,"Object"],[15,8,23,0],[15,9,23,0,"defineProperty"],[15,23,23,0],[15,24,23,0,"exports"],[15,31,23,0],[16,4,23,0,"enumerable"],[16,14,23,0],[17,4,23,0,"get"],[17,7,23,0],[17,18,23,0,"get"],[17,19,23,0],[18,6,23,0],[18,13,23,0,"AuthProvider"],[18,25,23,0],[19,4,23,0],[20,2,23,0],[21,2,104,0,"exports"],[21,9,104,0],[21,10,104,0,"useAuth"],[21,17,104,0],[21,20,104,0,"useAuth"],[21,27,104,0],[22,2,1,0],[22,6,1,0,"_react"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,2,0],[23,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[23,42,2,0],[23,45,2,0,"require"],[23,52,2,0],[23,53,2,0,"_dependencyMap"],[23,67,2,0],[24,2,2,0],[24,6,2,0,"AsyncStorage"],[24,18,2,0],[24,21,2,0,"_interopDefault"],[24,36,2,0],[24,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[24,73,2,0],[25,2,3,0],[25,6,3,0,"_servicesApi"],[25,18,3,0],[25,21,3,0,"require"],[25,28,3,0],[25,29,3,0,"_dependencyMap"],[25,43,3,0],[26,2,3,42],[26,6,3,42,"_reactJsxDevRuntime"],[26,25,3,42],[26,28,3,42,"require"],[26,35,3,42],[26,36,3,42,"_dependencyMap"],[26,50,3,42],[27,2,21,0],[27,8,21,6,"AuthContext"],[27,19,21,17],[27,35,21,20],[27,39,21,20,"createContext"],[27,45,21,33],[27,46,21,33,"createContext"],[27,59,21,33],[27,61,21,51],[27,62,21,52],[27,63,21,72],[27,64,21,73],[28,2,23,7],[28,8,23,13,"AuthProvider"],[28,20,23,60],[28,23,23,63,"AuthProvider"],[28,24,23,64],[29,4,23,66,"children"],[30,2,23,75],[30,3,23,76],[30,8,23,81],[31,4,23,81,"_s"],[31,6,23,81],[32,4,24,2],[32,10,24,8],[32,11,24,9,"user"],[32,15,24,13],[32,17,24,15,"setUser"],[32,24,24,22],[32,25,24,23],[32,28,24,26],[32,32,24,26,"useState"],[32,38,24,34],[32,39,24,34,"useState"],[32,47,24,34],[32,49,24,48],[32,53,24,52],[32,54,24,53],[33,4,25,2],[33,10,25,8],[33,11,25,9,"loading"],[33,18,25,16],[33,20,25,18,"setLoading"],[33,30,25,28],[33,31,25,29],[33,34,25,32],[33,38,25,32,"useState"],[33,44,25,40],[33,45,25,40,"useState"],[33,53,25,40],[33,55,25,41],[33,59,25,45],[33,60,25,46],[34,4,26,2],[34,10,26,8],[34,11,26,9,"showOnboarding"],[34,25,26,23],[34,27,26,25,"setShowOnboarding"],[34,44,26,42],[34,45,26,43],[34,48,26,46],[34,52,26,46,"useState"],[34,58,26,54],[34,59,26,54,"useState"],[34,67,26,54],[34,69,26,55],[34,74,26,60],[34,75,26,61],[35,4,28,2],[35,8,28,2,"useEffect"],[35,14,28,11],[35,15,28,11,"useEffect"],[35,24,28,11],[35,26,28,12],[35,32,28,18],[36,6,29,4,"loadStoredData"],[36,20,29,18],[36,21,29,19],[36,22,29,20],[37,4,30,2],[37,5,30,3],[37,7,30,5],[37,9,30,7],[37,10,30,8],[38,4,32,2],[38,19,32,17,"loadStoredData"],[38,33,32,31,"loadStoredData"],[38,34,32,31],[38,36,32,34],[39,6,33,4],[39,10,33,8],[40,8,34,6],[40,14,34,12,"storedUser"],[40,24,34,22],[40,27,34,25],[40,33,34,31,"AsyncStorage"],[40,45,34,43],[40,46,34,43,"default"],[40,53,34,43],[40,54,34,44,"getItem"],[40,61,34,51],[40,62,34,52],[40,68,34,58],[40,69,34,59],[41,8,35,6],[41,14,35,12,"storedToken"],[41,25,35,23],[41,28,35,26],[41,34,35,32,"AsyncStorage"],[41,46,35,44],[41,47,35,44,"default"],[41,54,35,44],[41,55,35,45,"getItem"],[41,62,35,52],[41,63,35,53],[41,70,35,60],[41,71,35,61],[42,8,36,6],[42,14,36,12,"onboardingCompleted"],[42,33,36,31],[42,36,36,34],[42,42,36,40,"AsyncStorage"],[42,54,36,52],[42,55,36,52,"default"],[42,62,36,52],[42,63,36,53,"getItem"],[42,70,36,60],[42,71,36,61],[42,92,36,82],[42,93,36,83],[43,8,38,6],[43,12,38,10,"storedUser"],[43,22,38,20],[43,26,38,24,"storedToken"],[43,37,38,35],[43,39,38,37],[44,10,39,8,"setUser"],[44,17,39,15],[44,18,39,16,"JSON"],[44,22,39,20],[44,23,39,21,"parse"],[44,28,39,26],[44,29,39,27,"storedUser"],[44,39,39,37],[44,40,39,38],[44,41,39,39],[46,10,41,8],[47,10,42,8],[47,14,42,12],[47,15,42,13,"onboardingCompleted"],[47,34,42,32],[47,36,42,34],[48,12,43,10,"setShowOnboarding"],[48,29,43,27],[48,30,43,28],[48,34,43,32],[48,35,43,33],[49,10,44,8],[50,8,45,6],[51,6,46,4],[51,7,46,5],[51,8,46,6],[51,15,46,13,"error"],[51,20,46,18],[51,22,46,20],[52,8,47,6,"console"],[52,15,47,13],[52,16,47,14,"error"],[52,21,47,19],[52,22,47,20],[52,50,47,48],[52,52,47,50,"error"],[52,57,47,55],[52,58,47,56],[53,6,48,4],[53,7,48,5],[53,16,48,14],[54,8,49,6,"setLoading"],[54,18,49,16],[54,19,49,17],[54,24,49,22],[54,25,49,23],[55,6,50,4],[56,4,51,2],[57,4,53,2],[57,10,53,8,"completeOnboarding"],[57,28,53,26],[57,31,53,29,"completeOnboarding"],[57,32,53,29],[57,37,53,35],[58,6,54,4,"setShowOnboarding"],[58,23,54,21],[58,24,54,22],[58,29,54,27],[58,30,54,28],[59,4,55,2],[59,5,55,3],[60,4,57,2],[60,19,57,17,"signIn"],[60,25,57,23,"signIn"],[60,26,57,24,"email"],[60,31,57,37],[60,33,57,39,"password"],[60,41,57,55],[60,43,57,57],[61,6,58,4],[61,10,58,8],[62,8,59,6],[62,14,59,12,"response"],[62,22,59,20],[62,25,59,23],[62,31,59,29,"authAPI"],[62,43,59,36],[62,44,59,36,"authAPI"],[62,51,59,36],[62,52,59,37,"login"],[62,57,59,42],[62,58,59,43,"email"],[62,63,59,48],[62,65,59,50,"password"],[62,73,59,58],[62,74,59,59],[63,8,60,6],[63,14,60,12],[64,10,60,14,"token"],[64,15,60,19],[65,10,60,21,"user"],[65,14,60,25],[65,16,60,27,"userData"],[66,8,60,36],[66,9,60,37],[66,12,60,40,"response"],[66,20,60,48],[66,21,60,49,"data"],[66,25,60,53],[67,8,62,6],[67,14,62,12,"AsyncStorage"],[67,26,62,24],[67,27,62,24,"default"],[67,34,62,24],[67,35,62,25,"setItem"],[67,42,62,32],[67,43,62,33],[67,50,62,40],[67,52,62,42,"token"],[67,57,62,47],[67,58,62,48],[68,8,63,6],[68,14,63,12,"AsyncStorage"],[68,26,63,24],[68,27,63,24,"default"],[68,34,63,24],[68,35,63,25,"setItem"],[68,42,63,32],[68,43,63,33],[68,49,63,39],[68,51,63,41,"JSON"],[68,55,63,45],[68,56,63,46,"stringify"],[68,65,63,55],[68,66,63,56,"userData"],[68,74,63,64],[68,75,63,65],[68,76,63,66],[69,8,64,6,"setUser"],[69,15,64,13],[69,16,64,14,"userData"],[69,24,64,22],[69,25,64,23],[70,6,65,4],[70,7,65,5],[70,8,65,6],[70,15,65,13,"error"],[70,20,65,23],[70,22,65,25],[71,8,66,6],[71,14,66,12],[71,18,66,16,"Error"],[71,23,66,21],[71,24,66,22,"error"],[71,29,66,27],[71,30,66,28,"response"],[71,38,66,36],[71,40,66,38,"data"],[71,44,66,42],[71,46,66,44,"message"],[71,53,66,51],[71,57,66,55],[71,78,66,76],[71,79,66,77],[72,6,67,4],[73,4,68,2],[74,4,70,2],[74,19,70,17,"signUp"],[74,25,70,23,"signUp"],[74,26,70,24,"email"],[74,31,70,37],[74,33,70,39,"password"],[74,41,70,55],[74,43,70,57,"name"],[74,47,70,69],[74,49,70,71],[75,6,71,4],[75,10,71,8],[76,8,72,6],[76,14,72,12,"response"],[76,22,72,20],[76,25,72,23],[76,31,72,29,"authAPI"],[76,43,72,36],[76,44,72,36,"authAPI"],[76,51,72,36],[76,52,72,37,"register"],[76,60,72,45],[76,61,72,46,"email"],[76,66,72,51],[76,68,72,53,"password"],[76,76,72,61],[76,78,72,63,"name"],[76,82,72,67],[76,83,72,68],[77,8,73,6],[77,14,73,12],[78,10,73,14,"token"],[78,15,73,19],[79,10,73,21,"user"],[79,14,73,25],[79,16,73,27,"userData"],[80,8,73,36],[80,9,73,37],[80,12,73,40,"response"],[80,20,73,48],[80,21,73,49,"data"],[80,25,73,53],[81,8,75,6],[81,14,75,12,"AsyncStorage"],[81,26,75,24],[81,27,75,24,"default"],[81,34,75,24],[81,35,75,25,"setItem"],[81,42,75,32],[81,43,75,33],[81,50,75,40],[81,52,75,42,"token"],[81,57,75,47],[81,58,75,48],[82,8,76,6],[82,14,76,12,"AsyncStorage"],[82,26,76,24],[82,27,76,24,"default"],[82,34,76,24],[82,35,76,25,"setItem"],[82,42,76,32],[82,43,76,33],[82,49,76,39],[82,51,76,41,"JSON"],[82,55,76,45],[82,56,76,46,"stringify"],[82,65,76,55],[82,66,76,56,"userData"],[82,74,76,64],[82,75,76,65],[82,76,76,66],[83,8,77,6,"setUser"],[83,15,77,13],[83,16,77,14,"userData"],[83,24,77,22],[83,25,77,23],[84,6,78,4],[84,7,78,5],[84,8,78,6],[84,15,78,13,"error"],[84,20,78,23],[84,22,78,25],[85,8,79,6],[85,14,79,12],[85,18,79,16,"Error"],[85,23,79,21],[85,24,79,22,"error"],[85,29,79,27],[85,30,79,28,"response"],[85,38,79,36],[85,40,79,38,"data"],[85,44,79,42],[85,46,79,44,"message"],[85,53,79,51],[85,57,79,55],[85,80,79,78],[85,81,79,79],[86,6,80,4],[87,4,81,2],[88,4,83,2],[88,19,83,17,"signOut"],[88,26,83,24,"signOut"],[88,27,83,24],[88,29,83,27],[89,6,84,4],[89,10,84,8],[90,8,85,6,"console"],[90,15,85,13],[90,16,85,14,"log"],[90,19,85,17],[90,20,85,18],[90,48,85,46],[90,49,85,47],[91,8,86,6],[91,14,86,12,"AsyncStorage"],[91,26,86,24],[91,27,86,24,"default"],[91,34,86,24],[91,35,86,25,"removeItem"],[91,45,86,35],[91,46,86,36],[91,53,86,43],[91,54,86,44],[92,8,87,6],[92,14,87,12,"AsyncStorage"],[92,26,87,24],[92,27,87,24,"default"],[92,34,87,24],[92,35,87,25,"removeItem"],[92,45,87,35],[92,46,87,36],[92,57,87,47],[92,58,87,48],[92,59,87,49],[92,60,87,50],[93,8,88,6],[93,14,88,12,"AsyncStorage"],[93,26,88,24],[93,27,88,24,"default"],[93,34,88,24],[93,35,88,25,"removeItem"],[93,45,88,35],[93,46,88,36],[93,52,88,42],[93,53,88,43],[94,8,89,6],[94,14,89,12,"AsyncStorage"],[94,26,89,24],[94,27,89,24,"default"],[94,34,89,24],[94,35,89,25,"removeItem"],[94,45,89,35],[94,46,89,36],[94,67,89,57],[94,68,89,58],[95,8,90,6,"setUser"],[95,15,90,13],[95,16,90,14],[95,20,90,18],[95,21,90,19],[96,8,91,6,"console"],[96,15,91,13],[96,16,91,14,"log"],[96,19,91,17],[96,20,91,18],[96,43,91,41],[96,44,91,42],[97,6,92,4],[97,7,92,5],[97,8,92,6],[97,15,92,13,"error"],[97,20,92,18],[97,22,92,20],[98,8,93,6,"console"],[98,15,93,13],[98,16,93,14,"error"],[98,21,93,19],[98,22,93,20],[98,45,93,43],[98,47,93,45,"error"],[98,52,93,50],[98,53,93,51],[99,6,94,4],[100,4,95,2],[101,4,97,2],[101,24,98,4],[101,28,98,4,"_reactJsxDevRuntime"],[101,47,98,4],[101,48,98,4,"jsxDEV"],[101,54,98,4],[101,56,98,5,"AuthContext"],[101,67,98,16],[101,68,98,17,"Provider"],[101,76,98,25],[102,6,98,26,"value"],[102,11,98,31],[102,13,98,33],[103,8,98,35,"user"],[103,12,98,39],[104,8,98,41,"loading"],[104,15,98,48],[105,8,98,50,"showOnboarding"],[105,22,98,64],[106,8,98,66,"completeOnboarding"],[106,26,98,84],[107,8,98,86,"signIn"],[107,14,98,92],[108,8,98,94,"signUp"],[108,14,98,100],[109,8,98,102,"signOut"],[110,6,98,110],[110,7,98,112],[111,6,98,112,"children"],[111,14,98,112],[111,16,99,7,"children"],[112,4,99,15],[113,6,99,15,"fileName"],[113,14,99,15],[113,16,99,15,"_jsxFileName"],[113,28,99,15],[114,6,99,15,"lineNumber"],[114,16,99,15],[115,6,99,15,"columnNumber"],[115,18,99,15],[116,4,99,15],[116,11,100,26],[116,12,100,27],[117,2,102,0],[117,3,102,1],[118,2,102,2,"_s"],[118,4,102,2],[118,5,23,13,"AuthProvider"],[118,17,23,60],[119,2,23,60,"_c"],[119,4,23,60],[119,7,23,13,"AuthProvider"],[119,19,23,60],[120,2,104,7],[120,11,104,16,"useAuth"],[120,18,104,23,"useAuth"],[120,19,104,23],[120,21,104,26],[121,4,104,26,"_s2"],[121,7,104,26],[122,4,105,2],[122,10,105,8,"context"],[122,17,105,15],[122,20,105,18],[122,24,105,18,"useContext"],[122,30,105,28],[122,31,105,28,"useContext"],[122,41,105,28],[122,43,105,29,"AuthContext"],[122,54,105,40],[122,55,105,41],[123,4,106,2],[123,8,106,6],[123,9,106,7,"context"],[123,16,106,14],[123,18,106,16],[124,6,107,4],[124,12,107,10],[124,16,107,14,"Error"],[124,21,107,19],[124,22,107,20],[124,67,107,65],[124,68,107,66],[125,4,108,2],[126,4,109,2],[126,11,109,9,"context"],[126,18,109,16],[127,2,110,0],[128,2,110,1,"_s2"],[128,5,110,1],[128,6,104,16,"useAuth"],[128,13,104,23],[129,2,104,23],[129,6,104,23,"_c"],[129,8,104,23],[130,2,104,23,"$RefreshReg$"],[130,14,104,23],[130,15,104,23,"_c"],[130,17,104,23],[131,0,104,23],[131,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredData","completeOnboarding","signIn","signUp","signOut","useAuth"],"mappings":"AAA;+DCsB;YCK;GDE;EEE;GFmB;6BGE;GHE;EIE;GJW;EKE;GLW;EME;GNY;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}