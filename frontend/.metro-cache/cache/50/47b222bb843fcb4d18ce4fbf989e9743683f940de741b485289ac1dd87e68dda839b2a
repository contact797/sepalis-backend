{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":50,"index":129}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":201},"end":{"line":4,"column":40,"index":241}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SubscriptionContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.SubscriptionProvider = SubscriptionProvider;\n  exports.useSubscription = useSubscription;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  var _AuthContext = require(_dependencyMap[2], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const SubscriptionContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function SubscriptionProvider({\n    children\n  }) {\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    const [isPremium, setIsPremium] = (0, _react.useState)(false);\n    const [isTrial, setIsTrial] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const [expiresAt, setExpiresAt] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      if (user) {\n        initializeSubscription();\n      }\n    }, [user]);\n    const initializeSubscription = async () => {\n      try {\n        // Vérifier le statut de l'abonnement\n        await checkSubscription();\n      } catch (error) {\n        console.error('Erreur initialisation abonnement:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const checkSubscription = async () => {\n      try {\n        setIsLoading(true);\n\n        // Vérifier depuis le backend\n        const response = await _servicesApi.subscriptionAPI.getStatus();\n        const status = response.data;\n        setIsPremium(status.isActive);\n        setIsTrial(status.isTrial);\n        setExpiresAt(status.expiresAt ? new Date(status.expiresAt) : null);\n        console.log('✅ Statut abonnement:', status);\n      } catch (error) {\n        console.error('Erreur vérification abonnement:', error);\n        // En cas d'erreur, on donne accès (meilleure UX en mode démo)\n        setIsPremium(true);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const startTrial = async () => {\n      try {\n        const response = await _servicesApi.subscriptionAPI.startTrial();\n        if (response.data.success) {\n          setIsPremium(true);\n          setIsTrial(true);\n          setExpiresAt(new Date(response.data.expiresAt));\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('Erreur démarrage essai:', error);\n        return false;\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SubscriptionContext.Provider, {\n      value: {\n        isPremium,\n        isTrial,\n        isLoading,\n        expiresAt,\n        checkSubscription,\n        startTrial\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this);\n  }\n  function useSubscription() {\n    const context = (0, _react.useContext)(SubscriptionContext);\n    if (context === undefined) {\n      throw new Error('useSubscription must be used within a SubscriptionProvider');\n    }\n    return context;\n  }\n});","lineCount":97,"map":[[8,2,17,0,"exports"],[8,9,17,0],[8,10,17,0,"SubscriptionProvider"],[8,30,17,0],[8,33,17,0,"SubscriptionProvider"],[8,53,17,0],[9,2,98,0,"exports"],[9,9,98,0],[9,10,98,0,"useSubscription"],[9,25,98,0],[9,28,98,0,"useSubscription"],[9,43,98,0],[10,2,1,0],[10,6,1,0,"_react"],[10,12,1,0],[10,15,1,0,"require"],[10,22,1,0],[10,23,1,0,"_dependencyMap"],[10,37,1,0],[11,2,2,0],[11,6,2,0,"_servicesApi"],[11,18,2,0],[11,21,2,0,"require"],[11,28,2,0],[11,29,2,0,"_dependencyMap"],[11,43,2,0],[12,2,4,0],[12,6,4,0,"_AuthContext"],[12,18,4,0],[12,21,4,0,"require"],[12,28,4,0],[12,29,4,0,"_dependencyMap"],[12,43,4,0],[13,2,4,40],[13,6,4,40,"_reactJsxDevRuntime"],[13,25,4,40],[13,28,4,40,"require"],[13,35,4,40],[13,36,4,40,"_dependencyMap"],[13,50,4,40],[14,2,15,0],[14,8,15,6,"SubscriptionContext"],[14,27,15,25],[14,43,15,28],[14,47,15,28,"createContext"],[14,53,15,41],[14,54,15,41,"createContext"],[14,67,15,41],[14,69,15,79,"undefined"],[14,78,15,88],[14,79,15,89],[15,2,17,7],[15,11,17,16,"SubscriptionProvider"],[15,31,17,36,"SubscriptionProvider"],[15,32,17,37],[16,4,17,39,"children"],[17,2,17,79],[17,3,17,80],[17,5,17,82],[18,4,18,2],[18,10,18,8],[19,6,18,10,"user"],[20,4,18,15],[20,5,18,16],[20,8,18,19],[20,12,18,19,"useAuth"],[20,24,18,26],[20,25,18,26,"useAuth"],[20,32,18,26],[20,34,18,27],[20,35,18,28],[21,4,19,2],[21,10,19,8],[21,11,19,9,"isPremium"],[21,20,19,18],[21,22,19,20,"setIsPremium"],[21,34,19,32],[21,35,19,33],[21,38,19,36],[21,42,19,36,"useState"],[21,48,19,44],[21,49,19,44,"useState"],[21,57,19,44],[21,59,19,45],[21,64,19,50],[21,65,19,51],[22,4,20,2],[22,10,20,8],[22,11,20,9,"isTrial"],[22,18,20,16],[22,20,20,18,"setIsTrial"],[22,30,20,28],[22,31,20,29],[22,34,20,32],[22,38,20,32,"useState"],[22,44,20,40],[22,45,20,40,"useState"],[22,53,20,40],[22,55,20,41],[22,60,20,46],[22,61,20,47],[23,4,21,2],[23,10,21,8],[23,11,21,9,"isLoading"],[23,20,21,18],[23,22,21,20,"setIsLoading"],[23,34,21,32],[23,35,21,33],[23,38,21,36],[23,42,21,36,"useState"],[23,48,21,44],[23,49,21,44,"useState"],[23,57,21,44],[23,59,21,45],[23,63,21,49],[23,64,21,50],[24,4,22,2],[24,10,22,8],[24,11,22,9,"expiresAt"],[24,20,22,18],[24,22,22,20,"setExpiresAt"],[24,34,22,32],[24,35,22,33],[24,38,22,36],[24,42,22,36,"useState"],[24,48,22,44],[24,49,22,44,"useState"],[24,57,22,44],[24,59,22,58],[24,63,22,62],[24,64,22,63],[25,4,24,2],[25,8,24,2,"useEffect"],[25,14,24,11],[25,15,24,11,"useEffect"],[25,24,24,11],[25,26,24,12],[25,32,24,18],[26,6,25,4],[26,10,25,8,"user"],[26,14,25,12],[26,16,25,14],[27,8,26,6,"initializeSubscription"],[27,30,26,28],[27,31,26,29],[27,32,26,30],[28,6,27,4],[29,4,28,2],[29,5,28,3],[29,7,28,5],[29,8,28,6,"user"],[29,12,28,10],[29,13,28,11],[29,14,28,12],[30,4,30,2],[30,10,30,8,"initializeSubscription"],[30,32,30,30],[30,35,30,33],[30,41,30,33,"initializeSubscription"],[30,42,30,33],[30,47,30,45],[31,6,31,4],[31,10,31,8],[32,8,32,6],[33,8,33,6],[33,14,33,12,"checkSubscription"],[33,31,33,29],[33,32,33,30],[33,33,33,31],[34,6,34,4],[34,7,34,5],[34,8,34,6],[34,15,34,13,"error"],[34,20,34,18],[34,22,34,20],[35,8,35,6,"console"],[35,15,35,13],[35,16,35,14,"error"],[35,21,35,19],[35,22,35,20],[35,57,35,55],[35,59,35,57,"error"],[35,64,35,62],[35,65,35,63],[36,6,36,4],[36,7,36,5],[36,16,36,14],[37,8,37,6,"setIsLoading"],[37,20,37,18],[37,21,37,19],[37,26,37,24],[37,27,37,25],[38,6,38,4],[39,4,39,2],[39,5,39,3],[40,4,41,2],[40,10,41,8,"checkSubscription"],[40,27,41,25],[40,30,41,28],[40,36,41,28,"checkSubscription"],[40,37,41,28],[40,42,41,40],[41,6,42,4],[41,10,42,8],[42,8,43,6,"setIsLoading"],[42,20,43,18],[42,21,43,19],[42,25,43,23],[42,26,43,24],[44,8,45,6],[45,8,46,6],[45,14,46,12,"response"],[45,22,46,20],[45,25,46,23],[45,31,46,29,"subscriptionAPI"],[45,43,46,44],[45,44,46,44,"subscriptionAPI"],[45,59,46,44],[45,60,46,45,"getStatus"],[45,69,46,54],[45,70,46,55],[45,71,46,56],[46,8,47,6],[46,14,47,12,"status"],[46,20,47,18],[46,23,47,21,"response"],[46,31,47,29],[46,32,47,30,"data"],[46,36,47,34],[47,8,49,6,"setIsPremium"],[47,20,49,18],[47,21,49,19,"status"],[47,27,49,25],[47,28,49,26,"isActive"],[47,36,49,34],[47,37,49,35],[48,8,50,6,"setIsTrial"],[48,18,50,16],[48,19,50,17,"status"],[48,25,50,23],[48,26,50,24,"isTrial"],[48,33,50,31],[48,34,50,32],[49,8,51,6,"setExpiresAt"],[49,20,51,18],[49,21,51,19,"status"],[49,27,51,25],[49,28,51,26,"expiresAt"],[49,37,51,35],[49,40,51,38],[49,44,51,42,"Date"],[49,48,51,46],[49,49,51,47,"status"],[49,55,51,53],[49,56,51,54,"expiresAt"],[49,65,51,63],[49,66,51,64],[49,69,51,67],[49,73,51,71],[49,74,51,72],[50,8,53,6,"console"],[50,15,53,13],[50,16,53,14,"log"],[50,19,53,17],[50,20,53,18],[50,42,53,40],[50,44,53,42,"status"],[50,50,53,48],[50,51,53,49],[51,6,55,4],[51,7,55,5],[51,8,55,6],[51,15,55,13,"error"],[51,20,55,18],[51,22,55,20],[52,8,56,6,"console"],[52,15,56,13],[52,16,56,14,"error"],[52,21,56,19],[52,22,56,20],[52,55,56,53],[52,57,56,55,"error"],[52,62,56,60],[52,63,56,61],[53,8,57,6],[54,8,58,6,"setIsPremium"],[54,20,58,18],[54,21,58,19],[54,25,58,23],[54,26,58,24],[55,6,59,4],[55,7,59,5],[55,16,59,14],[56,8,60,6,"setIsLoading"],[56,20,60,18],[56,21,60,19],[56,26,60,24],[56,27,60,25],[57,6,61,4],[58,4,62,2],[58,5,62,3],[59,4,64,2],[59,10,64,8,"startTrial"],[59,20,64,18],[59,23,64,21],[59,29,64,21,"startTrial"],[59,30,64,21],[59,35,64,51],[60,6,65,4],[60,10,65,8],[61,8,66,6],[61,14,66,12,"response"],[61,22,66,20],[61,25,66,23],[61,31,66,29,"subscriptionAPI"],[61,43,66,44],[61,44,66,44,"subscriptionAPI"],[61,59,66,44],[61,60,66,45,"startTrial"],[61,70,66,55],[61,71,66,56],[61,72,66,57],[62,8,68,6],[62,12,68,10,"response"],[62,20,68,18],[62,21,68,19,"data"],[62,25,68,23],[62,26,68,24,"success"],[62,33,68,31],[62,35,68,33],[63,10,69,8,"setIsPremium"],[63,22,69,20],[63,23,69,21],[63,27,69,25],[63,28,69,26],[64,10,70,8,"setIsTrial"],[64,20,70,18],[64,21,70,19],[64,25,70,23],[64,26,70,24],[65,10,71,8,"setExpiresAt"],[65,22,71,20],[65,23,71,21],[65,27,71,25,"Date"],[65,31,71,29],[65,32,71,30,"response"],[65,40,71,38],[65,41,71,39,"data"],[65,45,71,43],[65,46,71,44,"expiresAt"],[65,55,71,53],[65,56,71,54],[65,57,71,55],[66,10,72,8],[66,17,72,15],[66,21,72,19],[67,8,73,6],[68,8,75,6],[68,15,75,13],[68,20,75,18],[69,6,76,4],[69,7,76,5],[69,8,76,6],[69,15,76,13,"error"],[69,20,76,18],[69,22,76,20],[70,8,77,6,"console"],[70,15,77,13],[70,16,77,14,"error"],[70,21,77,19],[70,22,77,20],[70,47,77,45],[70,49,77,47,"error"],[70,54,77,52],[70,55,77,53],[71,8,78,6],[71,15,78,13],[71,20,78,18],[72,6,79,4],[73,4,80,2],[73,5,80,3],[74,4,82,2],[74,24,83,4],[74,28,83,4,"_reactJsxDevRuntime"],[74,47,83,4],[74,48,83,4,"jsxDEV"],[74,54,83,4],[74,56,83,5,"SubscriptionContext"],[74,75,83,24],[74,76,83,25,"Provider"],[74,84,83,33],[75,6,84,6,"value"],[75,11,84,11],[75,13,84,13],[76,8,85,8,"isPremium"],[76,17,85,17],[77,8,86,8,"isTrial"],[77,15,86,15],[78,8,87,8,"isLoading"],[78,17,87,17],[79,8,88,8,"expiresAt"],[79,17,88,17],[80,8,89,8,"checkSubscription"],[80,25,89,25],[81,8,90,8,"startTrial"],[82,6,91,6],[82,7,91,8],[83,6,91,8,"children"],[83,14,91,8],[83,16,93,7,"children"],[84,4,93,15],[85,6,93,15,"fileName"],[85,14,93,15],[85,16,93,15,"_jsxFileName"],[85,28,93,15],[86,6,93,15,"lineNumber"],[86,16,93,15],[87,6,93,15,"columnNumber"],[87,18,93,15],[88,4,93,15],[88,11,94,34],[88,12,94,35],[89,2,96,0],[90,2,98,7],[90,11,98,16,"useSubscription"],[90,26,98,31,"useSubscription"],[90,27,98,31],[90,29,98,34],[91,4,99,2],[91,10,99,8,"context"],[91,17,99,15],[91,20,99,18],[91,24,99,18,"useContext"],[91,30,99,28],[91,31,99,28,"useContext"],[91,41,99,28],[91,43,99,29,"SubscriptionContext"],[91,62,99,48],[91,63,99,49],[92,4,100,2],[92,8,100,6,"context"],[92,15,100,13],[92,20,100,18,"undefined"],[92,29,100,27],[92,31,100,29],[93,6,101,4],[93,12,101,10],[93,16,101,14,"Error"],[93,21,101,19],[93,22,101,20],[93,82,101,80],[93,83,101,81],[94,4,102,2],[95,4,103,2],[95,11,103,9,"context"],[95,18,103,16],[96,2,104,0],[97,0,104,1],[97,3]],"functionMap":{"names":["<global>","SubscriptionProvider","useEffect$argument_0","initializeSubscription","checkSubscription","startTrial","useSubscription"],"mappings":"AAA;OCgB;YCO;GDI;iCEE;GFS;4BGE;GHqB;qBIE;GJgB;CDgB;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}