{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":42,"index":202}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({});\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [showOnboarding, setShowOnboarding] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      loadStoredData();\n    }, []);\n    async function loadStoredData() {\n      try {\n        const storedUser = await AsyncStorage.default.getItem('user');\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const onboardingCompleted = await AsyncStorage.default.getItem('onboardingCompleted');\n        if (storedUser && storedToken) {\n          setUser(JSON.parse(storedUser));\n\n          // Afficher l'onboarding si pas encore compl√©t√©\n          if (!onboardingCompleted) {\n            setShowOnboarding(true);\n          }\n        }\n      } catch (error) {\n        console.error('Erreur chargement donn√©es:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    const completeOnboarding = () => {\n      setShowOnboarding(false);\n    };\n    async function signIn(email, password) {\n      try {\n        const response = await _servicesApi.authAPI.login(email, password);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('authToken', token);\n        await AsyncStorage.default.setItem('token', token); // Garder les deux pour compatibilit√©\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur de connexion');\n      }\n    }\n    async function signUp(email, password, name) {\n      try {\n        const response = await _servicesApi.authAPI.register(email, password, name);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('authToken', token);\n        await AsyncStorage.default.setItem('token', token); // Garder les deux pour compatibilit√©\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur d\\'inscription');\n      }\n    }\n    async function signOut() {\n      try {\n        console.log('üîì D√©connexion en cours...');\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('authToken'); // Support des deux noms\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('onboardingCompleted');\n        setUser(null);\n        console.log('‚úÖ D√©connexion r√©ussie');\n      } catch (error) {\n        console.error('‚ùå Erreur d√©connexion:', error);\n      }\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        showOnboarding,\n        completeOnboarding,\n        signIn,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"ou5WqXBdlbtSLOpshRQ22BRd1OE=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth doit √™tre utilis√© dans AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":133,"map":[[15,2,23,0,"Object"],[15,8,23,0],[15,9,23,0,"defineProperty"],[15,23,23,0],[15,24,23,0,"exports"],[15,31,23,0],[16,4,23,0,"enumerable"],[16,14,23,0],[17,4,23,0,"get"],[17,7,23,0],[17,18,23,0,"get"],[17,19,23,0],[18,6,23,0],[18,13,23,0,"AuthProvider"],[18,25,23,0],[19,4,23,0],[20,2,23,0],[21,2,106,0,"exports"],[21,9,106,0],[21,10,106,0,"useAuth"],[21,17,106,0],[21,20,106,0,"useAuth"],[21,27,106,0],[22,2,1,0],[22,6,1,0,"_react"],[22,12,1,0],[22,15,1,0,"require"],[22,22,1,0],[22,23,1,0,"_dependencyMap"],[22,37,1,0],[23,2,2,0],[23,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[23,42,2,0],[23,45,2,0,"require"],[23,52,2,0],[23,53,2,0,"_dependencyMap"],[23,67,2,0],[24,2,2,0],[24,6,2,0,"AsyncStorage"],[24,18,2,0],[24,21,2,0,"_interopDefault"],[24,36,2,0],[24,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[24,73,2,0],[25,2,3,0],[25,6,3,0,"_servicesApi"],[25,18,3,0],[25,21,3,0,"require"],[25,28,3,0],[25,29,3,0,"_dependencyMap"],[25,43,3,0],[26,2,3,42],[26,6,3,42,"_reactJsxDevRuntime"],[26,25,3,42],[26,28,3,42,"require"],[26,35,3,42],[26,36,3,42,"_dependencyMap"],[26,50,3,42],[27,2,21,0],[27,8,21,6,"AuthContext"],[27,19,21,17],[27,35,21,20],[27,39,21,20,"createContext"],[27,45,21,33],[27,46,21,33,"createContext"],[27,59,21,33],[27,61,21,51],[27,62,21,52],[27,63,21,72],[27,64,21,73],[28,2,23,7],[28,8,23,13,"AuthProvider"],[28,20,23,60],[28,23,23,63,"AuthProvider"],[28,24,23,64],[29,4,23,66,"children"],[30,2,23,75],[30,3,23,76],[30,8,23,81],[31,4,23,81,"_s"],[31,6,23,81],[32,4,24,2],[32,10,24,8],[32,11,24,9,"user"],[32,15,24,13],[32,17,24,15,"setUser"],[32,24,24,22],[32,25,24,23],[32,28,24,26],[32,32,24,26,"useState"],[32,38,24,34],[32,39,24,34,"useState"],[32,47,24,34],[32,49,24,48],[32,53,24,52],[32,54,24,53],[33,4,25,2],[33,10,25,8],[33,11,25,9,"loading"],[33,18,25,16],[33,20,25,18,"setLoading"],[33,30,25,28],[33,31,25,29],[33,34,25,32],[33,38,25,32,"useState"],[33,44,25,40],[33,45,25,40,"useState"],[33,53,25,40],[33,55,25,41],[33,59,25,45],[33,60,25,46],[34,4,26,2],[34,10,26,8],[34,11,26,9,"showOnboarding"],[34,25,26,23],[34,27,26,25,"setShowOnboarding"],[34,44,26,42],[34,45,26,43],[34,48,26,46],[34,52,26,46,"useState"],[34,58,26,54],[34,59,26,54,"useState"],[34,67,26,54],[34,69,26,55],[34,74,26,60],[34,75,26,61],[35,4,28,2],[35,8,28,2,"useEffect"],[35,14,28,11],[35,15,28,11,"useEffect"],[35,24,28,11],[35,26,28,12],[35,32,28,18],[36,6,29,4,"loadStoredData"],[36,20,29,18],[36,21,29,19],[36,22,29,20],[37,4,30,2],[37,5,30,3],[37,7,30,5],[37,9,30,7],[37,10,30,8],[38,4,32,2],[38,19,32,17,"loadStoredData"],[38,33,32,31,"loadStoredData"],[38,34,32,31],[38,36,32,34],[39,6,33,4],[39,10,33,8],[40,8,34,6],[40,14,34,12,"storedUser"],[40,24,34,22],[40,27,34,25],[40,33,34,31,"AsyncStorage"],[40,45,34,43],[40,46,34,43,"default"],[40,53,34,43],[40,54,34,44,"getItem"],[40,61,34,51],[40,62,34,52],[40,68,34,58],[40,69,34,59],[41,8,35,6],[41,14,35,12,"storedToken"],[41,25,35,23],[41,28,35,26],[41,34,35,32,"AsyncStorage"],[41,46,35,44],[41,47,35,44,"default"],[41,54,35,44],[41,55,35,45,"getItem"],[41,62,35,52],[41,63,35,53],[41,70,35,60],[41,71,35,61],[42,8,36,6],[42,14,36,12,"onboardingCompleted"],[42,33,36,31],[42,36,36,34],[42,42,36,40,"AsyncStorage"],[42,54,36,52],[42,55,36,52,"default"],[42,62,36,52],[42,63,36,53,"getItem"],[42,70,36,60],[42,71,36,61],[42,92,36,82],[42,93,36,83],[43,8,38,6],[43,12,38,10,"storedUser"],[43,22,38,20],[43,26,38,24,"storedToken"],[43,37,38,35],[43,39,38,37],[44,10,39,8,"setUser"],[44,17,39,15],[44,18,39,16,"JSON"],[44,22,39,20],[44,23,39,21,"parse"],[44,28,39,26],[44,29,39,27,"storedUser"],[44,39,39,37],[44,40,39,38],[44,41,39,39],[46,10,41,8],[47,10,42,8],[47,14,42,12],[47,15,42,13,"onboardingCompleted"],[47,34,42,32],[47,36,42,34],[48,12,43,10,"setShowOnboarding"],[48,29,43,27],[48,30,43,28],[48,34,43,32],[48,35,43,33],[49,10,44,8],[50,8,45,6],[51,6,46,4],[51,7,46,5],[51,8,46,6],[51,15,46,13,"error"],[51,20,46,18],[51,22,46,20],[52,8,47,6,"console"],[52,15,47,13],[52,16,47,14,"error"],[52,21,47,19],[52,22,47,20],[52,50,47,48],[52,52,47,50,"error"],[52,57,47,55],[52,58,47,56],[53,6,48,4],[53,7,48,5],[53,16,48,14],[54,8,49,6,"setLoading"],[54,18,49,16],[54,19,49,17],[54,24,49,22],[54,25,49,23],[55,6,50,4],[56,4,51,2],[57,4,53,2],[57,10,53,8,"completeOnboarding"],[57,28,53,26],[57,31,53,29,"completeOnboarding"],[57,32,53,29],[57,37,53,35],[58,6,54,4,"setShowOnboarding"],[58,23,54,21],[58,24,54,22],[58,29,54,27],[58,30,54,28],[59,4,55,2],[59,5,55,3],[60,4,57,2],[60,19,57,17,"signIn"],[60,25,57,23,"signIn"],[60,26,57,24,"email"],[60,31,57,37],[60,33,57,39,"password"],[60,41,57,55],[60,43,57,57],[61,6,58,4],[61,10,58,8],[62,8,59,6],[62,14,59,12,"response"],[62,22,59,20],[62,25,59,23],[62,31,59,29,"authAPI"],[62,43,59,36],[62,44,59,36,"authAPI"],[62,51,59,36],[62,52,59,37,"login"],[62,57,59,42],[62,58,59,43,"email"],[62,63,59,48],[62,65,59,50,"password"],[62,73,59,58],[62,74,59,59],[63,8,60,6],[63,14,60,12],[64,10,60,14,"token"],[64,15,60,19],[65,10,60,21,"user"],[65,14,60,25],[65,16,60,27,"userData"],[66,8,60,36],[66,9,60,37],[66,12,60,40,"response"],[66,20,60,48],[66,21,60,49,"data"],[66,25,60,53],[67,8,62,6],[67,14,62,12,"AsyncStorage"],[67,26,62,24],[67,27,62,24,"default"],[67,34,62,24],[67,35,62,25,"setItem"],[67,42,62,32],[67,43,62,33],[67,54,62,44],[67,56,62,46,"token"],[67,61,62,51],[67,62,62,52],[68,8,63,6],[68,14,63,12,"AsyncStorage"],[68,26,63,24],[68,27,63,24,"default"],[68,34,63,24],[68,35,63,25,"setItem"],[68,42,63,32],[68,43,63,33],[68,50,63,40],[68,52,63,42,"token"],[68,57,63,47],[68,58,63,48],[68,59,63,49],[68,60,63,50],[69,8,64,6],[69,14,64,12,"AsyncStorage"],[69,26,64,24],[69,27,64,24,"default"],[69,34,64,24],[69,35,64,25,"setItem"],[69,42,64,32],[69,43,64,33],[69,49,64,39],[69,51,64,41,"JSON"],[69,55,64,45],[69,56,64,46,"stringify"],[69,65,64,55],[69,66,64,56,"userData"],[69,74,64,64],[69,75,64,65],[69,76,64,66],[70,8,65,6,"setUser"],[70,15,65,13],[70,16,65,14,"userData"],[70,24,65,22],[70,25,65,23],[71,6,66,4],[71,7,66,5],[71,8,66,6],[71,15,66,13,"error"],[71,20,66,23],[71,22,66,25],[72,8,67,6],[72,14,67,12],[72,18,67,16,"Error"],[72,23,67,21],[72,24,67,22,"error"],[72,29,67,27],[72,30,67,28,"response"],[72,38,67,36],[72,40,67,38,"data"],[72,44,67,42],[72,46,67,44,"message"],[72,53,67,51],[72,57,67,55],[72,78,67,76],[72,79,67,77],[73,6,68,4],[74,4,69,2],[75,4,71,2],[75,19,71,17,"signUp"],[75,25,71,23,"signUp"],[75,26,71,24,"email"],[75,31,71,37],[75,33,71,39,"password"],[75,41,71,55],[75,43,71,57,"name"],[75,47,71,69],[75,49,71,71],[76,6,72,4],[76,10,72,8],[77,8,73,6],[77,14,73,12,"response"],[77,22,73,20],[77,25,73,23],[77,31,73,29,"authAPI"],[77,43,73,36],[77,44,73,36,"authAPI"],[77,51,73,36],[77,52,73,37,"register"],[77,60,73,45],[77,61,73,46,"email"],[77,66,73,51],[77,68,73,53,"password"],[77,76,73,61],[77,78,73,63,"name"],[77,82,73,67],[77,83,73,68],[78,8,74,6],[78,14,74,12],[79,10,74,14,"token"],[79,15,74,19],[80,10,74,21,"user"],[80,14,74,25],[80,16,74,27,"userData"],[81,8,74,36],[81,9,74,37],[81,12,74,40,"response"],[81,20,74,48],[81,21,74,49,"data"],[81,25,74,53],[82,8,76,6],[82,14,76,12,"AsyncStorage"],[82,26,76,24],[82,27,76,24,"default"],[82,34,76,24],[82,35,76,25,"setItem"],[82,42,76,32],[82,43,76,33],[82,54,76,44],[82,56,76,46,"token"],[82,61,76,51],[82,62,76,52],[83,8,77,6],[83,14,77,12,"AsyncStorage"],[83,26,77,24],[83,27,77,24,"default"],[83,34,77,24],[83,35,77,25,"setItem"],[83,42,77,32],[83,43,77,33],[83,50,77,40],[83,52,77,42,"token"],[83,57,77,47],[83,58,77,48],[83,59,77,49],[83,60,77,50],[84,8,78,6],[84,14,78,12,"AsyncStorage"],[84,26,78,24],[84,27,78,24,"default"],[84,34,78,24],[84,35,78,25,"setItem"],[84,42,78,32],[84,43,78,33],[84,49,78,39],[84,51,78,41,"JSON"],[84,55,78,45],[84,56,78,46,"stringify"],[84,65,78,55],[84,66,78,56,"userData"],[84,74,78,64],[84,75,78,65],[84,76,78,66],[85,8,79,6,"setUser"],[85,15,79,13],[85,16,79,14,"userData"],[85,24,79,22],[85,25,79,23],[86,6,80,4],[86,7,80,5],[86,8,80,6],[86,15,80,13,"error"],[86,20,80,23],[86,22,80,25],[87,8,81,6],[87,14,81,12],[87,18,81,16,"Error"],[87,23,81,21],[87,24,81,22,"error"],[87,29,81,27],[87,30,81,28,"response"],[87,38,81,36],[87,40,81,38,"data"],[87,44,81,42],[87,46,81,44,"message"],[87,53,81,51],[87,57,81,55],[87,80,81,78],[87,81,81,79],[88,6,82,4],[89,4,83,2],[90,4,85,2],[90,19,85,17,"signOut"],[90,26,85,24,"signOut"],[90,27,85,24],[90,29,85,27],[91,6,86,4],[91,10,86,8],[92,8,87,6,"console"],[92,15,87,13],[92,16,87,14,"log"],[92,19,87,17],[92,20,87,18],[92,48,87,46],[92,49,87,47],[93,8,88,6],[93,14,88,12,"AsyncStorage"],[93,26,88,24],[93,27,88,24,"default"],[93,34,88,24],[93,35,88,25,"removeItem"],[93,45,88,35],[93,46,88,36],[93,53,88,43],[93,54,88,44],[94,8,89,6],[94,14,89,12,"AsyncStorage"],[94,26,89,24],[94,27,89,24,"default"],[94,34,89,24],[94,35,89,25,"removeItem"],[94,45,89,35],[94,46,89,36],[94,57,89,47],[94,58,89,48],[94,59,89,49],[94,60,89,50],[95,8,90,6],[95,14,90,12,"AsyncStorage"],[95,26,90,24],[95,27,90,24,"default"],[95,34,90,24],[95,35,90,25,"removeItem"],[95,45,90,35],[95,46,90,36],[95,52,90,42],[95,53,90,43],[96,8,91,6],[96,14,91,12,"AsyncStorage"],[96,26,91,24],[96,27,91,24,"default"],[96,34,91,24],[96,35,91,25,"removeItem"],[96,45,91,35],[96,46,91,36],[96,67,91,57],[96,68,91,58],[97,8,92,6,"setUser"],[97,15,92,13],[97,16,92,14],[97,20,92,18],[97,21,92,19],[98,8,93,6,"console"],[98,15,93,13],[98,16,93,14,"log"],[98,19,93,17],[98,20,93,18],[98,43,93,41],[98,44,93,42],[99,6,94,4],[99,7,94,5],[99,8,94,6],[99,15,94,13,"error"],[99,20,94,18],[99,22,94,20],[100,8,95,6,"console"],[100,15,95,13],[100,16,95,14,"error"],[100,21,95,19],[100,22,95,20],[100,45,95,43],[100,47,95,45,"error"],[100,52,95,50],[100,53,95,51],[101,6,96,4],[102,4,97,2],[103,4,99,2],[103,24,100,4],[103,28,100,4,"_reactJsxDevRuntime"],[103,47,100,4],[103,48,100,4,"jsxDEV"],[103,54,100,4],[103,56,100,5,"AuthContext"],[103,67,100,16],[103,68,100,17,"Provider"],[103,76,100,25],[104,6,100,26,"value"],[104,11,100,31],[104,13,100,33],[105,8,100,35,"user"],[105,12,100,39],[106,8,100,41,"loading"],[106,15,100,48],[107,8,100,50,"showOnboarding"],[107,22,100,64],[108,8,100,66,"completeOnboarding"],[108,26,100,84],[109,8,100,86,"signIn"],[109,14,100,92],[110,8,100,94,"signUp"],[110,14,100,100],[111,8,100,102,"signOut"],[112,6,100,110],[112,7,100,112],[113,6,100,112,"children"],[113,14,100,112],[113,16,101,7,"children"],[114,4,101,15],[115,6,101,15,"fileName"],[115,14,101,15],[115,16,101,15,"_jsxFileName"],[115,28,101,15],[116,6,101,15,"lineNumber"],[116,16,101,15],[117,6,101,15,"columnNumber"],[117,18,101,15],[118,4,101,15],[118,11,102,26],[118,12,102,27],[119,2,104,0],[119,3,104,1],[120,2,104,2,"_s"],[120,4,104,2],[120,5,23,13,"AuthProvider"],[120,17,23,60],[121,2,23,60,"_c"],[121,4,23,60],[121,7,23,13,"AuthProvider"],[121,19,23,60],[122,2,106,7],[122,11,106,16,"useAuth"],[122,18,106,23,"useAuth"],[122,19,106,23],[122,21,106,26],[123,4,106,26,"_s2"],[123,7,106,26],[124,4,107,2],[124,10,107,8,"context"],[124,17,107,15],[124,20,107,18],[124,24,107,18,"useContext"],[124,30,107,28],[124,31,107,28,"useContext"],[124,41,107,28],[124,43,107,29,"AuthContext"],[124,54,107,40],[124,55,107,41],[125,4,108,2],[125,8,108,6],[125,9,108,7,"context"],[125,16,108,14],[125,18,108,16],[126,6,109,4],[126,12,109,10],[126,16,109,14,"Error"],[126,21,109,19],[126,22,109,20],[126,67,109,65],[126,68,109,66],[127,4,110,2],[128,4,111,2],[128,11,111,9,"context"],[128,18,111,16],[129,2,112,0],[130,2,112,1,"_s2"],[130,5,112,1],[130,6,106,16,"useAuth"],[130,13,106,23],[131,2,106,23],[131,6,106,23,"_c"],[131,8,106,23],[132,2,106,23,"$RefreshReg$"],[132,14,106,23],[132,15,106,23,"_c"],[132,17,106,23],[133,0,106,23],[133,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredData","completeOnboarding","signIn","signUp","signOut","useAuth"],"mappings":"AAA;+DCsB;YCK;GDE;EEE;GFmB;6BGE;GHE;EIE;GJY;EKE;GLY;EME;GNY;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}