{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":42,"index":202}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({});\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [showOnboarding, setShowOnboarding] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      loadStoredData();\n    }, []);\n    async function loadStoredData() {\n      try {\n        const storedUser = await AsyncStorage.default.getItem('user');\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const onboardingCompleted = await AsyncStorage.default.getItem('onboardingCompleted');\n        if (storedUser && storedToken) {\n          setUser(JSON.parse(storedUser));\n\n          // Afficher l'onboarding si pas encore compl√©t√©\n          if (!onboardingCompleted) {\n            setShowOnboarding(true);\n          }\n        }\n      } catch (error) {\n        console.error('Erreur chargement donn√©es:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    const completeOnboarding = () => {\n      setShowOnboarding(false);\n    };\n    async function signIn(email, password) {\n      try {\n        const response = await _servicesApi.authAPI.login(email, password);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('authToken', token);\n        await AsyncStorage.default.setItem('token', token); // Garder les deux pour compatibilit√©\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur de connexion');\n      }\n    }\n    async function signUp(email, password, name) {\n      try {\n        const response = await _servicesApi.authAPI.register(email, password, name);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('authToken', token);\n        await AsyncStorage.default.setItem('token', token); // Garder les deux pour compatibilit√©\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur d\\'inscription');\n      }\n    }\n    async function signOut() {\n      try {\n        console.log('üîì D√©connexion en cours...');\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('authToken'); // Support des deux noms\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('onboardingCompleted');\n        setUser(null);\n        console.log('‚úÖ D√©connexion r√©ussie');\n      } catch (error) {\n        console.error('‚ùå Erreur d√©connexion:', error);\n      }\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        showOnboarding,\n        completeOnboarding,\n        signIn,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this);\n  };\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth doit √™tre utilis√© dans AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":124,"map":[[13,2,23,0,"Object"],[13,8,23,0],[13,9,23,0,"defineProperty"],[13,23,23,0],[13,24,23,0,"exports"],[13,31,23,0],[14,4,23,0,"enumerable"],[14,14,23,0],[15,4,23,0,"get"],[15,7,23,0],[15,18,23,0,"get"],[15,19,23,0],[16,6,23,0],[16,13,23,0,"AuthProvider"],[16,25,23,0],[17,4,23,0],[18,2,23,0],[19,2,106,0,"exports"],[19,9,106,0],[19,10,106,0,"useAuth"],[19,17,106,0],[19,20,106,0,"useAuth"],[19,27,106,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,42,2,0],[21,45,2,0,"require"],[21,52,2,0],[21,53,2,0,"_dependencyMap"],[21,67,2,0],[22,2,2,0],[22,6,2,0,"AsyncStorage"],[22,18,2,0],[22,21,2,0,"_interopDefault"],[22,36,2,0],[22,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,73,2,0],[23,2,3,0],[23,6,3,0,"_servicesApi"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,3,42],[24,6,3,42,"_reactJsxDevRuntime"],[24,25,3,42],[24,28,3,42,"require"],[24,35,3,42],[24,36,3,42,"_dependencyMap"],[24,50,3,42],[25,2,21,0],[25,8,21,6,"AuthContext"],[25,19,21,17],[25,35,21,20],[25,39,21,20,"createContext"],[25,45,21,33],[25,46,21,33,"createContext"],[25,59,21,33],[25,61,21,51],[25,62,21,52],[25,63,21,72],[25,64,21,73],[26,2,23,7],[26,8,23,13,"AuthProvider"],[26,20,23,60],[26,23,23,63,"AuthProvider"],[26,24,23,64],[27,4,23,66,"children"],[28,2,23,75],[28,3,23,76],[28,8,23,81],[29,4,24,2],[29,10,24,8],[29,11,24,9,"user"],[29,15,24,13],[29,17,24,15,"setUser"],[29,24,24,22],[29,25,24,23],[29,28,24,26],[29,32,24,26,"useState"],[29,38,24,34],[29,39,24,34,"useState"],[29,47,24,34],[29,49,24,48],[29,53,24,52],[29,54,24,53],[30,4,25,2],[30,10,25,8],[30,11,25,9,"loading"],[30,18,25,16],[30,20,25,18,"setLoading"],[30,30,25,28],[30,31,25,29],[30,34,25,32],[30,38,25,32,"useState"],[30,44,25,40],[30,45,25,40,"useState"],[30,53,25,40],[30,55,25,41],[30,59,25,45],[30,60,25,46],[31,4,26,2],[31,10,26,8],[31,11,26,9,"showOnboarding"],[31,25,26,23],[31,27,26,25,"setShowOnboarding"],[31,44,26,42],[31,45,26,43],[31,48,26,46],[31,52,26,46,"useState"],[31,58,26,54],[31,59,26,54,"useState"],[31,67,26,54],[31,69,26,55],[31,74,26,60],[31,75,26,61],[32,4,28,2],[32,8,28,2,"useEffect"],[32,14,28,11],[32,15,28,11,"useEffect"],[32,24,28,11],[32,26,28,12],[32,32,28,18],[33,6,29,4,"loadStoredData"],[33,20,29,18],[33,21,29,19],[33,22,29,20],[34,4,30,2],[34,5,30,3],[34,7,30,5],[34,9,30,7],[34,10,30,8],[35,4,32,2],[35,19,32,17,"loadStoredData"],[35,33,32,31,"loadStoredData"],[35,34,32,31],[35,36,32,34],[36,6,33,4],[36,10,33,8],[37,8,34,6],[37,14,34,12,"storedUser"],[37,24,34,22],[37,27,34,25],[37,33,34,31,"AsyncStorage"],[37,45,34,43],[37,46,34,43,"default"],[37,53,34,43],[37,54,34,44,"getItem"],[37,61,34,51],[37,62,34,52],[37,68,34,58],[37,69,34,59],[38,8,35,6],[38,14,35,12,"storedToken"],[38,25,35,23],[38,28,35,26],[38,34,35,32,"AsyncStorage"],[38,46,35,44],[38,47,35,44,"default"],[38,54,35,44],[38,55,35,45,"getItem"],[38,62,35,52],[38,63,35,53],[38,70,35,60],[38,71,35,61],[39,8,36,6],[39,14,36,12,"onboardingCompleted"],[39,33,36,31],[39,36,36,34],[39,42,36,40,"AsyncStorage"],[39,54,36,52],[39,55,36,52,"default"],[39,62,36,52],[39,63,36,53,"getItem"],[39,70,36,60],[39,71,36,61],[39,92,36,82],[39,93,36,83],[40,8,38,6],[40,12,38,10,"storedUser"],[40,22,38,20],[40,26,38,24,"storedToken"],[40,37,38,35],[40,39,38,37],[41,10,39,8,"setUser"],[41,17,39,15],[41,18,39,16,"JSON"],[41,22,39,20],[41,23,39,21,"parse"],[41,28,39,26],[41,29,39,27,"storedUser"],[41,39,39,37],[41,40,39,38],[41,41,39,39],[43,10,41,8],[44,10,42,8],[44,14,42,12],[44,15,42,13,"onboardingCompleted"],[44,34,42,32],[44,36,42,34],[45,12,43,10,"setShowOnboarding"],[45,29,43,27],[45,30,43,28],[45,34,43,32],[45,35,43,33],[46,10,44,8],[47,8,45,6],[48,6,46,4],[48,7,46,5],[48,8,46,6],[48,15,46,13,"error"],[48,20,46,18],[48,22,46,20],[49,8,47,6,"console"],[49,15,47,13],[49,16,47,14,"error"],[49,21,47,19],[49,22,47,20],[49,50,47,48],[49,52,47,50,"error"],[49,57,47,55],[49,58,47,56],[50,6,48,4],[50,7,48,5],[50,16,48,14],[51,8,49,6,"setLoading"],[51,18,49,16],[51,19,49,17],[51,24,49,22],[51,25,49,23],[52,6,50,4],[53,4,51,2],[54,4,53,2],[54,10,53,8,"completeOnboarding"],[54,28,53,26],[54,31,53,29,"completeOnboarding"],[54,32,53,29],[54,37,53,35],[55,6,54,4,"setShowOnboarding"],[55,23,54,21],[55,24,54,22],[55,29,54,27],[55,30,54,28],[56,4,55,2],[56,5,55,3],[57,4,57,2],[57,19,57,17,"signIn"],[57,25,57,23,"signIn"],[57,26,57,24,"email"],[57,31,57,37],[57,33,57,39,"password"],[57,41,57,55],[57,43,57,57],[58,6,58,4],[58,10,58,8],[59,8,59,6],[59,14,59,12,"response"],[59,22,59,20],[59,25,59,23],[59,31,59,29,"authAPI"],[59,43,59,36],[59,44,59,36,"authAPI"],[59,51,59,36],[59,52,59,37,"login"],[59,57,59,42],[59,58,59,43,"email"],[59,63,59,48],[59,65,59,50,"password"],[59,73,59,58],[59,74,59,59],[60,8,60,6],[60,14,60,12],[61,10,60,14,"token"],[61,15,60,19],[62,10,60,21,"user"],[62,14,60,25],[62,16,60,27,"userData"],[63,8,60,36],[63,9,60,37],[63,12,60,40,"response"],[63,20,60,48],[63,21,60,49,"data"],[63,25,60,53],[64,8,62,6],[64,14,62,12,"AsyncStorage"],[64,26,62,24],[64,27,62,24,"default"],[64,34,62,24],[64,35,62,25,"setItem"],[64,42,62,32],[64,43,62,33],[64,54,62,44],[64,56,62,46,"token"],[64,61,62,51],[64,62,62,52],[65,8,63,6],[65,14,63,12,"AsyncStorage"],[65,26,63,24],[65,27,63,24,"default"],[65,34,63,24],[65,35,63,25,"setItem"],[65,42,63,32],[65,43,63,33],[65,50,63,40],[65,52,63,42,"token"],[65,57,63,47],[65,58,63,48],[65,59,63,49],[65,60,63,50],[66,8,64,6],[66,14,64,12,"AsyncStorage"],[66,26,64,24],[66,27,64,24,"default"],[66,34,64,24],[66,35,64,25,"setItem"],[66,42,64,32],[66,43,64,33],[66,49,64,39],[66,51,64,41,"JSON"],[66,55,64,45],[66,56,64,46,"stringify"],[66,65,64,55],[66,66,64,56,"userData"],[66,74,64,64],[66,75,64,65],[66,76,64,66],[67,8,65,6,"setUser"],[67,15,65,13],[67,16,65,14,"userData"],[67,24,65,22],[67,25,65,23],[68,6,66,4],[68,7,66,5],[68,8,66,6],[68,15,66,13,"error"],[68,20,66,23],[68,22,66,25],[69,8,67,6],[69,14,67,12],[69,18,67,16,"Error"],[69,23,67,21],[69,24,67,22,"error"],[69,29,67,27],[69,30,67,28,"response"],[69,38,67,36],[69,40,67,38,"data"],[69,44,67,42],[69,46,67,44,"message"],[69,53,67,51],[69,57,67,55],[69,78,67,76],[69,79,67,77],[70,6,68,4],[71,4,69,2],[72,4,71,2],[72,19,71,17,"signUp"],[72,25,71,23,"signUp"],[72,26,71,24,"email"],[72,31,71,37],[72,33,71,39,"password"],[72,41,71,55],[72,43,71,57,"name"],[72,47,71,69],[72,49,71,71],[73,6,72,4],[73,10,72,8],[74,8,73,6],[74,14,73,12,"response"],[74,22,73,20],[74,25,73,23],[74,31,73,29,"authAPI"],[74,43,73,36],[74,44,73,36,"authAPI"],[74,51,73,36],[74,52,73,37,"register"],[74,60,73,45],[74,61,73,46,"email"],[74,66,73,51],[74,68,73,53,"password"],[74,76,73,61],[74,78,73,63,"name"],[74,82,73,67],[74,83,73,68],[75,8,74,6],[75,14,74,12],[76,10,74,14,"token"],[76,15,74,19],[77,10,74,21,"user"],[77,14,74,25],[77,16,74,27,"userData"],[78,8,74,36],[78,9,74,37],[78,12,74,40,"response"],[78,20,74,48],[78,21,74,49,"data"],[78,25,74,53],[79,8,76,6],[79,14,76,12,"AsyncStorage"],[79,26,76,24],[79,27,76,24,"default"],[79,34,76,24],[79,35,76,25,"setItem"],[79,42,76,32],[79,43,76,33],[79,54,76,44],[79,56,76,46,"token"],[79,61,76,51],[79,62,76,52],[80,8,77,6],[80,14,77,12,"AsyncStorage"],[80,26,77,24],[80,27,77,24,"default"],[80,34,77,24],[80,35,77,25,"setItem"],[80,42,77,32],[80,43,77,33],[80,50,77,40],[80,52,77,42,"token"],[80,57,77,47],[80,58,77,48],[80,59,77,49],[80,60,77,50],[81,8,78,6],[81,14,78,12,"AsyncStorage"],[81,26,78,24],[81,27,78,24,"default"],[81,34,78,24],[81,35,78,25,"setItem"],[81,42,78,32],[81,43,78,33],[81,49,78,39],[81,51,78,41,"JSON"],[81,55,78,45],[81,56,78,46,"stringify"],[81,65,78,55],[81,66,78,56,"userData"],[81,74,78,64],[81,75,78,65],[81,76,78,66],[82,8,79,6,"setUser"],[82,15,79,13],[82,16,79,14,"userData"],[82,24,79,22],[82,25,79,23],[83,6,80,4],[83,7,80,5],[83,8,80,6],[83,15,80,13,"error"],[83,20,80,23],[83,22,80,25],[84,8,81,6],[84,14,81,12],[84,18,81,16,"Error"],[84,23,81,21],[84,24,81,22,"error"],[84,29,81,27],[84,30,81,28,"response"],[84,38,81,36],[84,40,81,38,"data"],[84,44,81,42],[84,46,81,44,"message"],[84,53,81,51],[84,57,81,55],[84,80,81,78],[84,81,81,79],[85,6,82,4],[86,4,83,2],[87,4,85,2],[87,19,85,17,"signOut"],[87,26,85,24,"signOut"],[87,27,85,24],[87,29,85,27],[88,6,86,4],[88,10,86,8],[89,8,87,6,"console"],[89,15,87,13],[89,16,87,14,"log"],[89,19,87,17],[89,20,87,18],[89,48,87,46],[89,49,87,47],[90,8,88,6],[90,14,88,12,"AsyncStorage"],[90,26,88,24],[90,27,88,24,"default"],[90,34,88,24],[90,35,88,25,"removeItem"],[90,45,88,35],[90,46,88,36],[90,53,88,43],[90,54,88,44],[91,8,89,6],[91,14,89,12,"AsyncStorage"],[91,26,89,24],[91,27,89,24,"default"],[91,34,89,24],[91,35,89,25,"removeItem"],[91,45,89,35],[91,46,89,36],[91,57,89,47],[91,58,89,48],[91,59,89,49],[91,60,89,50],[92,8,90,6],[92,14,90,12,"AsyncStorage"],[92,26,90,24],[92,27,90,24,"default"],[92,34,90,24],[92,35,90,25,"removeItem"],[92,45,90,35],[92,46,90,36],[92,52,90,42],[92,53,90,43],[93,8,91,6],[93,14,91,12,"AsyncStorage"],[93,26,91,24],[93,27,91,24,"default"],[93,34,91,24],[93,35,91,25,"removeItem"],[93,45,91,35],[93,46,91,36],[93,67,91,57],[93,68,91,58],[94,8,92,6,"setUser"],[94,15,92,13],[94,16,92,14],[94,20,92,18],[94,21,92,19],[95,8,93,6,"console"],[95,15,93,13],[95,16,93,14,"log"],[95,19,93,17],[95,20,93,18],[95,43,93,41],[95,44,93,42],[96,6,94,4],[96,7,94,5],[96,8,94,6],[96,15,94,13,"error"],[96,20,94,18],[96,22,94,20],[97,8,95,6,"console"],[97,15,95,13],[97,16,95,14,"error"],[97,21,95,19],[97,22,95,20],[97,45,95,43],[97,47,95,45,"error"],[97,52,95,50],[97,53,95,51],[98,6,96,4],[99,4,97,2],[100,4,99,2],[100,24,100,4],[100,28,100,4,"_reactJsxDevRuntime"],[100,47,100,4],[100,48,100,4,"jsxDEV"],[100,54,100,4],[100,56,100,5,"AuthContext"],[100,67,100,16],[100,68,100,17,"Provider"],[100,76,100,25],[101,6,100,26,"value"],[101,11,100,31],[101,13,100,33],[102,8,100,35,"user"],[102,12,100,39],[103,8,100,41,"loading"],[103,15,100,48],[104,8,100,50,"showOnboarding"],[104,22,100,64],[105,8,100,66,"completeOnboarding"],[105,26,100,84],[106,8,100,86,"signIn"],[106,14,100,92],[107,8,100,94,"signUp"],[107,14,100,100],[108,8,100,102,"signOut"],[109,6,100,110],[109,7,100,112],[110,6,100,112,"children"],[110,14,100,112],[110,16,101,7,"children"],[111,4,101,15],[112,6,101,15,"fileName"],[112,14,101,15],[112,16,101,15,"_jsxFileName"],[112,28,101,15],[113,6,101,15,"lineNumber"],[113,16,101,15],[114,6,101,15,"columnNumber"],[114,18,101,15],[115,4,101,15],[115,11,102,26],[115,12,102,27],[116,2,104,0],[116,3,104,1],[117,2,106,7],[117,11,106,16,"useAuth"],[117,18,106,23,"useAuth"],[117,19,106,23],[117,21,106,26],[118,4,107,2],[118,10,107,8,"context"],[118,17,107,15],[118,20,107,18],[118,24,107,18,"useContext"],[118,30,107,28],[118,31,107,28,"useContext"],[118,41,107,28],[118,43,107,29,"AuthContext"],[118,54,107,40],[118,55,107,41],[119,4,108,2],[119,8,108,6],[119,9,108,7,"context"],[119,16,108,14],[119,18,108,16],[120,6,109,4],[120,12,109,10],[120,16,109,14,"Error"],[120,21,109,19],[120,22,109,20],[120,67,109,65],[120,68,109,66],[121,4,110,2],[122,4,111,2],[122,11,111,9,"context"],[122,18,111,16],[123,2,112,0],[124,0,112,1],[124,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredData","completeOnboarding","signIn","signUp","signOut","useAuth"],"mappings":"AAA;+DCsB;YCK;GDE;EEE;GFmB;6BGE;GHE;EIE;GJY;EKE;GLY;EME;GNY;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}