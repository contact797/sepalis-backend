{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":42,"index":202}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)({});\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const [showOnboarding, setShowOnboarding] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      loadStoredData();\n    }, []);\n    async function loadStoredData() {\n      try {\n        const storedUser = await AsyncStorage.default.getItem('user');\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const onboardingCompleted = await AsyncStorage.default.getItem('onboardingCompleted');\n        if (storedUser && storedToken) {\n          setUser(JSON.parse(storedUser));\n\n          // Afficher l'onboarding si pas encore compl√©t√©\n          if (!onboardingCompleted) {\n            setShowOnboarding(true);\n          }\n        }\n      } catch (error) {\n        console.error('Erreur chargement donn√©es:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    const completeOnboarding = () => {\n      setShowOnboarding(false);\n    };\n    async function signIn(email, password) {\n      try {\n        const response = await _servicesApi.authAPI.login(email, password);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur de connexion');\n      }\n    }\n    async function signUp(email, password, name) {\n      try {\n        const response = await _servicesApi.authAPI.register(email, password, name);\n        const {\n          token,\n          user: userData\n        } = response.data;\n        await AsyncStorage.default.setItem('token', token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        setUser(userData);\n      } catch (error) {\n        throw new Error(error.response?.data?.message || 'Erreur d\\'inscription');\n      }\n    }\n    async function signOut() {\n      try {\n        console.log('üîì D√©connexion en cours...');\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('authToken'); // Support des deux noms\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('onboardingCompleted');\n        setUser(null);\n        console.log('‚úÖ D√©connexion r√©ussie');\n      } catch (error) {\n        console.error('‚ùå Erreur d√©connexion:', error);\n      }\n    }\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        showOnboarding,\n        completeOnboarding,\n        signIn,\n        signUp,\n        signOut\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }, this);\n  };\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth doit √™tre utilis√© dans AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":122,"map":[[13,2,23,0,"Object"],[13,8,23,0],[13,9,23,0,"defineProperty"],[13,23,23,0],[13,24,23,0,"exports"],[13,31,23,0],[14,4,23,0,"enumerable"],[14,14,23,0],[15,4,23,0,"get"],[15,7,23,0],[15,18,23,0,"get"],[15,19,23,0],[16,6,23,0],[16,13,23,0,"AuthProvider"],[16,25,23,0],[17,4,23,0],[18,2,23,0],[19,2,104,0,"exports"],[19,9,104,0],[19,10,104,0,"useAuth"],[19,17,104,0],[19,20,104,0,"useAuth"],[19,27,104,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,42,2,0],[21,45,2,0,"require"],[21,52,2,0],[21,53,2,0,"_dependencyMap"],[21,67,2,0],[22,2,2,0],[22,6,2,0,"AsyncStorage"],[22,18,2,0],[22,21,2,0,"_interopDefault"],[22,36,2,0],[22,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[22,73,2,0],[23,2,3,0],[23,6,3,0,"_servicesApi"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,3,42],[24,6,3,42,"_reactJsxDevRuntime"],[24,25,3,42],[24,28,3,42,"require"],[24,35,3,42],[24,36,3,42,"_dependencyMap"],[24,50,3,42],[25,2,21,0],[25,8,21,6,"AuthContext"],[25,19,21,17],[25,35,21,20],[25,39,21,20,"createContext"],[25,45,21,33],[25,46,21,33,"createContext"],[25,59,21,33],[25,61,21,51],[25,62,21,52],[25,63,21,72],[25,64,21,73],[26,2,23,7],[26,8,23,13,"AuthProvider"],[26,20,23,60],[26,23,23,63,"AuthProvider"],[26,24,23,64],[27,4,23,66,"children"],[28,2,23,75],[28,3,23,76],[28,8,23,81],[29,4,24,2],[29,10,24,8],[29,11,24,9,"user"],[29,15,24,13],[29,17,24,15,"setUser"],[29,24,24,22],[29,25,24,23],[29,28,24,26],[29,32,24,26,"useState"],[29,38,24,34],[29,39,24,34,"useState"],[29,47,24,34],[29,49,24,48],[29,53,24,52],[29,54,24,53],[30,4,25,2],[30,10,25,8],[30,11,25,9,"loading"],[30,18,25,16],[30,20,25,18,"setLoading"],[30,30,25,28],[30,31,25,29],[30,34,25,32],[30,38,25,32,"useState"],[30,44,25,40],[30,45,25,40,"useState"],[30,53,25,40],[30,55,25,41],[30,59,25,45],[30,60,25,46],[31,4,26,2],[31,10,26,8],[31,11,26,9,"showOnboarding"],[31,25,26,23],[31,27,26,25,"setShowOnboarding"],[31,44,26,42],[31,45,26,43],[31,48,26,46],[31,52,26,46,"useState"],[31,58,26,54],[31,59,26,54,"useState"],[31,67,26,54],[31,69,26,55],[31,74,26,60],[31,75,26,61],[32,4,28,2],[32,8,28,2,"useEffect"],[32,14,28,11],[32,15,28,11,"useEffect"],[32,24,28,11],[32,26,28,12],[32,32,28,18],[33,6,29,4,"loadStoredData"],[33,20,29,18],[33,21,29,19],[33,22,29,20],[34,4,30,2],[34,5,30,3],[34,7,30,5],[34,9,30,7],[34,10,30,8],[35,4,32,2],[35,19,32,17,"loadStoredData"],[35,33,32,31,"loadStoredData"],[35,34,32,31],[35,36,32,34],[36,6,33,4],[36,10,33,8],[37,8,34,6],[37,14,34,12,"storedUser"],[37,24,34,22],[37,27,34,25],[37,33,34,31,"AsyncStorage"],[37,45,34,43],[37,46,34,43,"default"],[37,53,34,43],[37,54,34,44,"getItem"],[37,61,34,51],[37,62,34,52],[37,68,34,58],[37,69,34,59],[38,8,35,6],[38,14,35,12,"storedToken"],[38,25,35,23],[38,28,35,26],[38,34,35,32,"AsyncStorage"],[38,46,35,44],[38,47,35,44,"default"],[38,54,35,44],[38,55,35,45,"getItem"],[38,62,35,52],[38,63,35,53],[38,70,35,60],[38,71,35,61],[39,8,36,6],[39,14,36,12,"onboardingCompleted"],[39,33,36,31],[39,36,36,34],[39,42,36,40,"AsyncStorage"],[39,54,36,52],[39,55,36,52,"default"],[39,62,36,52],[39,63,36,53,"getItem"],[39,70,36,60],[39,71,36,61],[39,92,36,82],[39,93,36,83],[40,8,38,6],[40,12,38,10,"storedUser"],[40,22,38,20],[40,26,38,24,"storedToken"],[40,37,38,35],[40,39,38,37],[41,10,39,8,"setUser"],[41,17,39,15],[41,18,39,16,"JSON"],[41,22,39,20],[41,23,39,21,"parse"],[41,28,39,26],[41,29,39,27,"storedUser"],[41,39,39,37],[41,40,39,38],[41,41,39,39],[43,10,41,8],[44,10,42,8],[44,14,42,12],[44,15,42,13,"onboardingCompleted"],[44,34,42,32],[44,36,42,34],[45,12,43,10,"setShowOnboarding"],[45,29,43,27],[45,30,43,28],[45,34,43,32],[45,35,43,33],[46,10,44,8],[47,8,45,6],[48,6,46,4],[48,7,46,5],[48,8,46,6],[48,15,46,13,"error"],[48,20,46,18],[48,22,46,20],[49,8,47,6,"console"],[49,15,47,13],[49,16,47,14,"error"],[49,21,47,19],[49,22,47,20],[49,50,47,48],[49,52,47,50,"error"],[49,57,47,55],[49,58,47,56],[50,6,48,4],[50,7,48,5],[50,16,48,14],[51,8,49,6,"setLoading"],[51,18,49,16],[51,19,49,17],[51,24,49,22],[51,25,49,23],[52,6,50,4],[53,4,51,2],[54,4,53,2],[54,10,53,8,"completeOnboarding"],[54,28,53,26],[54,31,53,29,"completeOnboarding"],[54,32,53,29],[54,37,53,35],[55,6,54,4,"setShowOnboarding"],[55,23,54,21],[55,24,54,22],[55,29,54,27],[55,30,54,28],[56,4,55,2],[56,5,55,3],[57,4,57,2],[57,19,57,17,"signIn"],[57,25,57,23,"signIn"],[57,26,57,24,"email"],[57,31,57,37],[57,33,57,39,"password"],[57,41,57,55],[57,43,57,57],[58,6,58,4],[58,10,58,8],[59,8,59,6],[59,14,59,12,"response"],[59,22,59,20],[59,25,59,23],[59,31,59,29,"authAPI"],[59,43,59,36],[59,44,59,36,"authAPI"],[59,51,59,36],[59,52,59,37,"login"],[59,57,59,42],[59,58,59,43,"email"],[59,63,59,48],[59,65,59,50,"password"],[59,73,59,58],[59,74,59,59],[60,8,60,6],[60,14,60,12],[61,10,60,14,"token"],[61,15,60,19],[62,10,60,21,"user"],[62,14,60,25],[62,16,60,27,"userData"],[63,8,60,36],[63,9,60,37],[63,12,60,40,"response"],[63,20,60,48],[63,21,60,49,"data"],[63,25,60,53],[64,8,62,6],[64,14,62,12,"AsyncStorage"],[64,26,62,24],[64,27,62,24,"default"],[64,34,62,24],[64,35,62,25,"setItem"],[64,42,62,32],[64,43,62,33],[64,50,62,40],[64,52,62,42,"token"],[64,57,62,47],[64,58,62,48],[65,8,63,6],[65,14,63,12,"AsyncStorage"],[65,26,63,24],[65,27,63,24,"default"],[65,34,63,24],[65,35,63,25,"setItem"],[65,42,63,32],[65,43,63,33],[65,49,63,39],[65,51,63,41,"JSON"],[65,55,63,45],[65,56,63,46,"stringify"],[65,65,63,55],[65,66,63,56,"userData"],[65,74,63,64],[65,75,63,65],[65,76,63,66],[66,8,64,6,"setUser"],[66,15,64,13],[66,16,64,14,"userData"],[66,24,64,22],[66,25,64,23],[67,6,65,4],[67,7,65,5],[67,8,65,6],[67,15,65,13,"error"],[67,20,65,23],[67,22,65,25],[68,8,66,6],[68,14,66,12],[68,18,66,16,"Error"],[68,23,66,21],[68,24,66,22,"error"],[68,29,66,27],[68,30,66,28,"response"],[68,38,66,36],[68,40,66,38,"data"],[68,44,66,42],[68,46,66,44,"message"],[68,53,66,51],[68,57,66,55],[68,78,66,76],[68,79,66,77],[69,6,67,4],[70,4,68,2],[71,4,70,2],[71,19,70,17,"signUp"],[71,25,70,23,"signUp"],[71,26,70,24,"email"],[71,31,70,37],[71,33,70,39,"password"],[71,41,70,55],[71,43,70,57,"name"],[71,47,70,69],[71,49,70,71],[72,6,71,4],[72,10,71,8],[73,8,72,6],[73,14,72,12,"response"],[73,22,72,20],[73,25,72,23],[73,31,72,29,"authAPI"],[73,43,72,36],[73,44,72,36,"authAPI"],[73,51,72,36],[73,52,72,37,"register"],[73,60,72,45],[73,61,72,46,"email"],[73,66,72,51],[73,68,72,53,"password"],[73,76,72,61],[73,78,72,63,"name"],[73,82,72,67],[73,83,72,68],[74,8,73,6],[74,14,73,12],[75,10,73,14,"token"],[75,15,73,19],[76,10,73,21,"user"],[76,14,73,25],[76,16,73,27,"userData"],[77,8,73,36],[77,9,73,37],[77,12,73,40,"response"],[77,20,73,48],[77,21,73,49,"data"],[77,25,73,53],[78,8,75,6],[78,14,75,12,"AsyncStorage"],[78,26,75,24],[78,27,75,24,"default"],[78,34,75,24],[78,35,75,25,"setItem"],[78,42,75,32],[78,43,75,33],[78,50,75,40],[78,52,75,42,"token"],[78,57,75,47],[78,58,75,48],[79,8,76,6],[79,14,76,12,"AsyncStorage"],[79,26,76,24],[79,27,76,24,"default"],[79,34,76,24],[79,35,76,25,"setItem"],[79,42,76,32],[79,43,76,33],[79,49,76,39],[79,51,76,41,"JSON"],[79,55,76,45],[79,56,76,46,"stringify"],[79,65,76,55],[79,66,76,56,"userData"],[79,74,76,64],[79,75,76,65],[79,76,76,66],[80,8,77,6,"setUser"],[80,15,77,13],[80,16,77,14,"userData"],[80,24,77,22],[80,25,77,23],[81,6,78,4],[81,7,78,5],[81,8,78,6],[81,15,78,13,"error"],[81,20,78,23],[81,22,78,25],[82,8,79,6],[82,14,79,12],[82,18,79,16,"Error"],[82,23,79,21],[82,24,79,22,"error"],[82,29,79,27],[82,30,79,28,"response"],[82,38,79,36],[82,40,79,38,"data"],[82,44,79,42],[82,46,79,44,"message"],[82,53,79,51],[82,57,79,55],[82,80,79,78],[82,81,79,79],[83,6,80,4],[84,4,81,2],[85,4,83,2],[85,19,83,17,"signOut"],[85,26,83,24,"signOut"],[85,27,83,24],[85,29,83,27],[86,6,84,4],[86,10,84,8],[87,8,85,6,"console"],[87,15,85,13],[87,16,85,14,"log"],[87,19,85,17],[87,20,85,18],[87,48,85,46],[87,49,85,47],[88,8,86,6],[88,14,86,12,"AsyncStorage"],[88,26,86,24],[88,27,86,24,"default"],[88,34,86,24],[88,35,86,25,"removeItem"],[88,45,86,35],[88,46,86,36],[88,53,86,43],[88,54,86,44],[89,8,87,6],[89,14,87,12,"AsyncStorage"],[89,26,87,24],[89,27,87,24,"default"],[89,34,87,24],[89,35,87,25,"removeItem"],[89,45,87,35],[89,46,87,36],[89,57,87,47],[89,58,87,48],[89,59,87,49],[89,60,87,50],[90,8,88,6],[90,14,88,12,"AsyncStorage"],[90,26,88,24],[90,27,88,24,"default"],[90,34,88,24],[90,35,88,25,"removeItem"],[90,45,88,35],[90,46,88,36],[90,52,88,42],[90,53,88,43],[91,8,89,6],[91,14,89,12,"AsyncStorage"],[91,26,89,24],[91,27,89,24,"default"],[91,34,89,24],[91,35,89,25,"removeItem"],[91,45,89,35],[91,46,89,36],[91,67,89,57],[91,68,89,58],[92,8,90,6,"setUser"],[92,15,90,13],[92,16,90,14],[92,20,90,18],[92,21,90,19],[93,8,91,6,"console"],[93,15,91,13],[93,16,91,14,"log"],[93,19,91,17],[93,20,91,18],[93,43,91,41],[93,44,91,42],[94,6,92,4],[94,7,92,5],[94,8,92,6],[94,15,92,13,"error"],[94,20,92,18],[94,22,92,20],[95,8,93,6,"console"],[95,15,93,13],[95,16,93,14,"error"],[95,21,93,19],[95,22,93,20],[95,45,93,43],[95,47,93,45,"error"],[95,52,93,50],[95,53,93,51],[96,6,94,4],[97,4,95,2],[98,4,97,2],[98,24,98,4],[98,28,98,4,"_reactJsxDevRuntime"],[98,47,98,4],[98,48,98,4,"jsxDEV"],[98,54,98,4],[98,56,98,5,"AuthContext"],[98,67,98,16],[98,68,98,17,"Provider"],[98,76,98,25],[99,6,98,26,"value"],[99,11,98,31],[99,13,98,33],[100,8,98,35,"user"],[100,12,98,39],[101,8,98,41,"loading"],[101,15,98,48],[102,8,98,50,"showOnboarding"],[102,22,98,64],[103,8,98,66,"completeOnboarding"],[103,26,98,84],[104,8,98,86,"signIn"],[104,14,98,92],[105,8,98,94,"signUp"],[105,14,98,100],[106,8,98,102,"signOut"],[107,6,98,110],[107,7,98,112],[108,6,98,112,"children"],[108,14,98,112],[108,16,99,7,"children"],[109,4,99,15],[110,6,99,15,"fileName"],[110,14,99,15],[110,16,99,15,"_jsxFileName"],[110,28,99,15],[111,6,99,15,"lineNumber"],[111,16,99,15],[112,6,99,15,"columnNumber"],[112,18,99,15],[113,4,99,15],[113,11,100,26],[113,12,100,27],[114,2,102,0],[114,3,102,1],[115,2,104,7],[115,11,104,16,"useAuth"],[115,18,104,23,"useAuth"],[115,19,104,23],[115,21,104,26],[116,4,105,2],[116,10,105,8,"context"],[116,17,105,15],[116,20,105,18],[116,24,105,18,"useContext"],[116,30,105,28],[116,31,105,28,"useContext"],[116,41,105,28],[116,43,105,29,"AuthContext"],[116,54,105,40],[116,55,105,41],[117,4,106,2],[117,8,106,6],[117,9,106,7,"context"],[117,16,106,14],[117,18,106,16],[118,6,107,4],[118,12,107,10],[118,16,107,14,"Error"],[118,21,107,19],[118,22,107,20],[118,67,107,65],[118,68,107,66],[119,4,108,2],[120,4,109,2],[120,11,109,9,"context"],[120,18,109,16],[121,2,110,0],[122,0,110,1],[122,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredData","completeOnboarding","signIn","signUp","signOut","useAuth"],"mappings":"AAA;+DCsB;YCK;GDE;EEE;GFmB;6BGE;GHE;EIE;GJW;EKE;GLW;EME;GNY;CDO;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}